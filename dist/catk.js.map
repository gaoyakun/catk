{"version":3,"file":"catk.js","sources":["../src/transform.ts","../src/point.ts","../src/boundingshape.ts","../src/boundinghull.ts","../src/boundingbox.ts","../src/boundingsegment.ts","../src/boundingsphere.ts","../src/intersect.ts","../src/core.ts","../src/curve.ts","../src/keycode.ts","../src/components.ts","../src/paint.ts","../src/catk.ts"],"sourcesContent":["export class Matrix2d {\n    a: number;\n    b: number;\n    c: number;\n    d: number;\n    e: number;\n    f: number;\n    constructor() {\n        this.a = 1;\n        this.b = 0;\n        this.c = 0;\n        this.d = 1;\n        this.e = 0;\n        this.f = 0;\n    }\n    static getIdentity() {\n        return new Matrix2d();\n    }\n    static getTranslate(x: number, y: number) {\n        return new Matrix2d().makeTranslate(x, y);\n    }\n    static getScale(x: number, y: number) {\n        return new Matrix2d().makeScale(x, y);\n    }\n    static getRotate(theta: number) {\n        return new Matrix2d().makeRotate(theta);\n    }\n    static transform(t1: Matrix2d, t2: Matrix2d) {\n        return new Matrix2d().copyFrom(t1).transform(t2);\n    }\n    static translate(t: Matrix2d, x: number, y: number) {\n        return new Matrix2d().copyFrom(t).translate(x, y);\n    }\n    static scale(t: Matrix2d, x: number, y: number) {\n        return new Matrix2d().copyFrom(t).scale(x, y);\n    }\n    static rotate(t: Matrix2d, theta: number) {\n        return new Matrix2d().copyFrom(t).rotate(theta);\n    }\n    static invert(t: Matrix2d) {\n        return new Matrix2d().copyFrom(t).invert();\n    }\n    set(a: number, b: number, c: number, d: number, e: number, f: number) {\n        this.a = a;\n        this.b = b;\n        this.c = c;\n        this.d = d;\n        this.e = e;\n        this.f = f;\n        return this;\n    }\n    makeIdentity() {\n        return this.set(1, 0, 0, 1, 0, 0);\n    }\n    makeTranslate(x: number, y: number) {\n        return this.set(1, 0, 0, 1, x, y);\n    }\n    makeScale(x: number, y: number) {\n        return this.set(x, 0, 0, y, 0, 0);\n    }\n    makeRotate(theta: number) {\n        let s = Math.sin(theta);\n        let c = Math.cos(theta);\n        return this.set(c, s, -s, c, 0.0, 0.0);\n    }\n    copyFrom(otherTransform: Matrix2d) {\n        return this.set(otherTransform.a, otherTransform.b, otherTransform.c, otherTransform.d, otherTransform.e, otherTransform.f);\n    }\n    transform(right: Matrix2d) {\n        return this.set(\n            this.a * right.a + this.c * right.b,\n            this.b * right.a + this.d * right.b,\n            this.a * right.c + this.c * right.d,\n            this.b * right.c + this.d * right.d,\n            this.a * right.e + this.c * right.f + this.e,\n            this.b * right.e + this.d * right.f + this.f\n        );\n    }\n    transformPoint(point: { x: number; y: number }) {\n        return {\n            x: Math.round(this.a * point.x + this.c * point.y + this.e),\n            y: Math.round(this.b * point.x + this.d * point.y + this.f)\n        };\n    }\n    translate(x: number, y: number) {\n        return this.transform(Matrix2d.getTranslate(x, y));\n    }\n    scale(x: number, y: number) {\n        return this.transform(Matrix2d.getScale(x, y));\n    }\n    rotate(theta: number) {\n        return this.transform(Matrix2d.getRotate(theta));\n    }\n    invert() {\n        let a00 = this.a;\n        let a01 = this.b;\n        let a02 = 0;\n        let a10 = this.c;\n        let a11 = this.d;\n        let a12 = 0;\n        let a20 = this.e;\n        let a21 = this.f;\n        let a22 = 1;\n        let b01 = a22 * a11 - a12 * a21;\n        let b11 = -a22 * a10 + a12 * a20;\n        let b21 = a21 * a10 - a11 * a20;\n        let det = a00 * b01 + a01 * b11 + a02 * b21;\n        if (!det) {\n            return this;\n        }\n        det = 1.0 / det;\n        this.a = b01 * det;\n        this.b = (-a22 * a01 + a02 * a21) * det;\n        this.c = b11 * det;\n        this.d = (a22 * a00 - a02 * a20) * det;\n        this.e = b21 * det;\n        this.f = (-a21 * a00 + a01 * a20) * det;\n        return this;\n    }\n    getTranslationPart(): { x: number; y: number } {\n        return { x: this.e, y: this.f };\n    }\n    setTranslationPart(t: { x: number; y: number }) {\n        this.e = t.x;\n        this.f = t.y;\n    }\n    getScalePart(): { x: number; y: number } {\n        return {\n            x: Math.sqrt(this.a * this.a + this.b * this.b),\n            y: Math.sqrt(this.c * this.c + this.d * this.d)\n        };\n    }\n    setScalePart(s: { x: number; y: number }) {\n        let sc = this.getScalePart();\n        let s1 = s.x / sc.x;\n        this.a *= s1;\n        this.b *= s1;\n        let s2 = s.y / sc.y;\n        this.c *= s2;\n        this.d *= s2;\n    }\n    getRotationPart(): number {\n        let sc = Math.sqrt(this.a * this.a + this.b * this.b);\n        if (sc === 0) {\n            return 0;\n        }\n        let ac = Math.max(Math.min(this.a / sc, 1), -1);\n        let as = Math.max(Math.min(this.b / sc, 1), -1);\n        let angle = Math.acos(ac);\n        return as >= 0 ? angle : 2 * Math.PI - angle;\n    }\n    setRotationPart(r: number) {\n        let sc = this.getScalePart();\n        let sin = Math.sin(r);\n        let cos = Math.cos(r);\n        this.a = sc.x * cos;\n        this.b = sc.x * sin;\n        this.c = -sc.y * sin;\n        this.d = sc.y * cos;\n    }\n}\n","export interface IPoint2d {\r\n    x: number;\r\n    y: number;\r\n}\r\n\r\nexport interface IVector2d {\r\n    x: number;\r\n    y: number;\r\n}\r\n\r\nexport interface IRect2d {\r\n    x: number;\r\n    y: number;\r\n    w: number;\r\n    h: number;\r\n}\r\n\r\nexport interface ISegment2d {\r\n    start: IPoint2d;\r\n    end: IPoint2d;\r\n}\r\n\r\nexport interface ISphere2d {\r\n    center: IPoint2d;\r\n    radius: number;\r\n}\r\n\r\nexport function GetTopLeft(rect: IRect2d): IPoint2d {\r\n    return { x: rect.x, y: rect.y };\r\n}\r\n\r\nexport function GetTopRight(rect: IRect2d): IPoint2d {\r\n    return { x: rect.x + rect.w, y: rect.y };\r\n}\r\n\r\nexport function GetBottomLeft(rect: IRect2d): IPoint2d {\r\n    return { x: rect.x, y: rect.y + rect.h };\r\n}\r\n\r\nexport function GetBottomRight(rect: IRect2d): IPoint2d {\r\n    return { x: rect.x + rect.w, y: rect.y + rect.h };\r\n}\r\n\r\nexport function Normalize(v: IVector2d) {\r\n    const len = VectorLength(v);\r\n    if (len > 0.0001) {\r\n        v.x /= len;\r\n        v.y /= len;\r\n    }\r\n}\r\n\r\nexport function VectorLengthSq(v: IVector2d) {\r\n    return v.x * v.x + v.y * v.y;\r\n}\r\n\r\nexport function VectorLength(v: IVector2d) {\r\n    return Math.sqrt(VectorLengthSq(v));\r\n}\r\n\r\nexport function DistanceSq(p1: IPoint2d, p2: IPoint2d) {\r\n    return VectorLengthSq(GetVector(p1, p2));\r\n}\r\n\r\nexport function Distance(p1: IPoint2d, p2: IPoint2d) {\r\n    return VectorLength(GetVector(p1, p2));\r\n}\r\n\r\nexport function DotProduct(v1: IVector2d, v2: IVector2d) {\r\n    return v1.x * v2.x + v1.y * v2.y;\r\n}\r\n\r\nexport function CrossProduct(v1: IVector2d, v2: IVector2d) {\r\n    return v1.x * v2.y - v1.y * v2.x;\r\n}\r\n\r\nexport function GetVector(start: IPoint2d, end: IPoint2d) {\r\n    return { x: end.x - start.x, y: end.y - start.y };\r\n}\r\n\r\nexport function ClampPoint(pt: IPoint2d, ptMin: IPoint2d, ptMax: IPoint2d): IPoint2d {\r\n    return { x: Math.max(ptMin.x, Math.min(ptMax.x, pt.x)), y: Math.max(ptMin.y, Math.min(ptMax.y, pt.y)) };\r\n}\r\n","import * as point from './point';\r\nimport * as transform from './transform';\r\n\r\nexport abstract class BoundingShape {\r\n    readonly type: string;\r\n    constructor(type: string) {\r\n        this.type = type;\r\n    }\r\n    abstract getBoundingbox(): point.IRect2d;\r\n    abstract getTransformedShape(transform: transform.Matrix2d): BoundingShape;\r\n}\r\n","import * as point from './point';\r\nimport * as shape from './boundingshape';\r\nimport * as transform from './transform';\r\n\r\nexport class BoundingHull extends shape.BoundingShape {\r\n    public static readonly type: string = 'Hull';\r\n    private _points: { x: number; y: number }[];\r\n    private _boundingbox: { x: number; y: number; w: number; h: number };\r\n    private _dirtyFlag: boolean;\r\n    constructor(points?: point.IPoint2d[]) {\r\n        super(BoundingHull.type);\r\n        this._points = points || [];\r\n        this._boundingbox = null;\r\n        this._dirtyFlag = this._points.length > 0;\r\n    }\r\n    addPoint(point: { x: number; y: number }) {\r\n        this._points.push(point);\r\n        this._dirtyFlag = true;\r\n    }\r\n    get length(): number {\r\n        return this._points.length;\r\n    }\r\n    get boundingbox() {\r\n        this._checkDirty();\r\n        return this._boundingbox;\r\n    }\r\n    get points() {\r\n        this._checkDirty();\r\n        return this._points;\r\n    }\r\n    getPoint(index: number) {\r\n        this._checkDirty();\r\n        return this._points[index];\r\n    }\r\n    removePoint(index: number) {\r\n        this._points.splice(index, 1);\r\n        if (this._points.length === 0) {\r\n            this._boundingbox = null;\r\n            this._dirtyFlag = false;\r\n        } else {\r\n            this._dirtyFlag = true;\r\n        }\r\n    }\r\n    clear() {\r\n        this._points.length = 0;\r\n        this._boundingbox = null;\r\n        this._dirtyFlag = false;\r\n    }\r\n    getBoundingbox(): point.IRect2d {\r\n        return this.boundingbox;\r\n    }\r\n    getTransformedShape(transform: transform.Matrix2d): shape.BoundingShape {\r\n        if (!transform) {\r\n            return new BoundingHull(this._points);\r\n        } else {\r\n            return new BoundingHull(\r\n                this._points.map(point => {\r\n                    return transform.transformPoint(point);\r\n                })\r\n            );\r\n        }\r\n    }\r\n    private _checkDirty() {\r\n        if (this._dirtyFlag) {\r\n            this._dirtyFlag = false;\r\n            this._adjustPoints();\r\n            this._computeBoundingbox();\r\n        }\r\n    }\r\n    private _adjustPoints() {\r\n        const num = this._points.length;\r\n        if (num < 3) {\r\n            return;\r\n        }\r\n        const adjusted = [this._points[0], this._points[1]];\r\n        for (let i = 2; i < num; i++) {\r\n            let last = adjusted.length - 1;\r\n            while (last > 0) {\r\n                const v1 = point.GetVector(adjusted[0], adjusted[last]);\r\n                const v2 = point.GetVector(adjusted[0], this._points[i]);\r\n                const t = point.CrossProduct(v1, v2);\r\n                if (t < 0) {\r\n                    adjusted.splice(last + 1, 0, this._points[i]);\r\n                    break;\r\n                } else if (t === 0 && point.VectorLengthSq(v2) > point.VectorLengthSq(v1)) {\r\n                    adjusted.splice(last + 1, 0, this._points[i]);\r\n                    break;\r\n                }\r\n                last--;\r\n            }\r\n            if (last === 0) {\r\n                adjusted.splice(1, 0, this._points[i]);\r\n            }\r\n        }\r\n        this._points = adjusted;\r\n    }\r\n    private _computeBoundingbox() {\r\n        if (this._points.length > 0) {\r\n            let minx = this._points[0].x;\r\n            let miny = this._points[0].y;\r\n            let maxx = minx;\r\n            let maxy = miny;\r\n            this._points.forEach(point => {\r\n                const x = point.x;\r\n                const y = point.y;\r\n                if (x < minx) {\r\n                    minx = x;\r\n                } else if (x > maxx) {\r\n                    maxx = x;\r\n                }\r\n                if (y < miny) {\r\n                    miny = y;\r\n                } else if (y > maxy) {\r\n                    maxy = y;\r\n                }\r\n            });\r\n            this._boundingbox = { x: minx, y: miny, w: maxx - minx + 1, h: maxy - miny + 1 };\r\n        } else {\r\n            this._boundingbox = null;\r\n        }\r\n    }\r\n}\r\n","import * as point from './point';\r\nimport * as shape from './boundingshape';\r\nimport * as boundinghull from './boundinghull';\r\nimport * as transform from './transform';\r\n\r\nexport class BoundingBox extends shape.BoundingShape {\r\n    public static readonly type: string = 'Box';\r\n    public rect: point.IRect2d;\r\n    constructor(rect?: point.IRect2d) {\r\n        super(BoundingBox.type);\r\n        this.rect = rect || null;\r\n    }\r\n    getBoundingbox(): point.IRect2d {\r\n        return this.rect;\r\n    }\r\n    getTransformedShape(transform: transform.Matrix2d): shape.BoundingShape {\r\n        if (this.rect === null) {\r\n            return null;\r\n        } else if (!transform) {\r\n            return new BoundingBox(this.rect);\r\n        } else {\r\n            const pointLeftTop = { x: this.rect.x, y: this.rect.y };\r\n            const pointLeftBottom = { x: this.rect.x, y: this.rect.y + this.rect.h - 1 };\r\n            const pointRightBottom = { x: this.rect.x + this.rect.w - 1, y: this.rect.y + this.rect.h - 1 };\r\n            const pointRightTop = { x: this.rect.x + this.rect.w - 1, y: this.rect.y };\r\n            return new boundinghull.BoundingHull([\r\n                transform.transformPoint(pointLeftTop),\r\n                transform.transformPoint(pointLeftBottom),\r\n                transform.transformPoint(pointRightBottom),\r\n                transform.transformPoint(pointRightTop)\r\n            ]);\r\n        }\r\n    }\r\n}\r\n","import * as point from './point';\nimport * as shape from './boundingshape';\nimport * as transform from './transform';\n\nexport class BoundingSegment extends shape.BoundingShape {\n    public static readonly type: string = 'Segment';\n    private _segment: point.ISegment2d;\n    private _dirty: boolean;\n    private _boundingbox: point.IRect2d;\n    constructor(seg: point.ISegment2d = null) {\n        super(BoundingSegment.type);\n        this._segment = seg;\n        this._dirty = !!seg;\n        this._boundingbox = null;\n    }\n    get start() {\n        return this._segment ? this._segment.start : null;\n    }\n    set start(pt: point.IPoint2d) {\n        if (!this._segment) {\n            this._segment = { start: pt, end: pt };\n        } else {\n            this._segment.start = pt;\n        }\n        this._dirty = true;\n    }\n    get end() {\n        return this._segment ? this._segment.end : null;\n    }\n    set end(pt: point.IPoint2d) {\n        if (!this._segment) {\n            this._segment = { start: pt, end: pt };\n        } else {\n            this._segment.end = pt;\n        }\n        this._dirty = true;\n    }\n    get segment(): point.ISegment2d {\n        return { start: this.start, end: this.end };\n    }\n    get boundingbox() {\n        this._checkDirty();\n        return this._boundingbox;\n    }\n    getBoundingbox(): point.IRect2d {\n        return this.boundingbox;\n    }\n    getTransformedShape(transform: transform.Matrix2d): shape.BoundingShape {\n        if (!transform || !this._segment) {\n            return new BoundingSegment(this._segment);\n        } else {\n            return new BoundingSegment({\n                start: transform.transformPoint(this._segment.start),\n                end: transform.transformPoint(this._segment.end)\n            });\n        }\n    }\n    private _checkDirty() {\n        if (this._dirty) {\n            this._dirty = false;\n            let minx = this._segment.start.x;\n            let miny = this._segment.start.y;\n            let maxx = this._segment.end.x;\n            let maxy = this._segment.end.y;\n            if (minx > maxx) {\n                const tmp = minx;\n                minx = maxx;\n                maxx = tmp;\n            }\n            if (miny > maxy) {\n                const tmp = miny;\n                miny = maxy;\n                maxy = tmp;\n            }\n            this._boundingbox = { x: minx, y: miny, w: maxx - minx + 1, h: maxy - miny + 1 };\n        }\n    }\n}\n","import * as point from './point';\nimport * as shape from './boundingshape';\nimport * as boundinghull from './boundinghull';\nimport * as transform from './transform';\n\nexport class BoundingSphere extends shape.BoundingShape {\n    public static readonly type: string = 'sphere';\n    private _sphere: point.ISphere2d;\n    private _dirty: boolean;\n    private _boundingbox: point.IRect2d;\n    constructor(sphere: point.ISphere2d = null) {\n        super(BoundingSphere.type);\n        this.sphere = sphere;\n    }\n    get center() {\n        return this._sphere ? this._sphere.center : null;\n    }\n    get radius() {\n        return this._sphere ? this._sphere.radius : null;\n    }\n    set center(pt: point.IPoint2d) {\n        if (!this._sphere) {\n            this._sphere = { center: pt, radius: 1 };\n        } else {\n            this._sphere.center = pt;\n        }\n        this._dirty = true;\n    }\n    set radius(radius: number) {\n        if (!this._sphere) {\n            this._sphere = { center: { x: 0, y: 0 }, radius: radius };\n        } else {\n            this._sphere.radius = radius;\n        }\n        this._dirty = true;\n    }\n    get sphere(): point.ISphere2d {\n        return this._sphere ? { center: this._sphere.center, radius: this._sphere.radius } : null;\n    }\n    set sphere(sphere: point.ISphere2d) {\n        this._sphere = sphere || null;\n        this._dirty = !!sphere;\n        this._boundingbox = null;\n    }\n    get boundingbox() {\n        this._checkDirty();\n        return this._boundingbox;\n    }\n    getBoundingbox(): point.IRect2d {\n        return this.boundingbox;\n    }\n    getTransformedShape(transform: transform.Matrix2d): shape.BoundingShape {\n        if (!transform || !this._sphere) {\n            return new BoundingSphere(this._sphere);\n        } else {\n            const transformedPoints: point.IPoint2d[] = [];\n            const A = Math.PI * 0.125;\n            const D = A * 2;\n            const R = this._sphere.radius / Math.cos(A);\n            const shape = new boundinghull.BoundingHull();\n            for (let angle = A; angle < Math.PI * 2; angle += D) {\n                const pt = transform.transformPoint({ x: R * Math.cos(angle), y: R * Math.sin(angle) });\n                pt.x = Math.round(pt.x);\n                pt.y = Math.round(pt.y);\n                shape.addPoint(pt);\n            }\n            return shape;\n        }\n    }\n    private _checkDirty() {\n        if (this._dirty) {\n            this._dirty = false;\n            this._boundingbox = {\n                x: this._sphere.center.x - this._sphere.radius + 1,\n                y: this._sphere.center.y - this._sphere.radius + 1,\n                w: 2 * this._sphere.radius - 1,\n                h: 2 * this._sphere.radius - 1\n            };\n        }\n    }\n}\n","import * as point from './point';\r\nimport * as shape from './boundingshape';\r\nimport * as boundinghull from './boundinghull';\r\nimport * as boundingbox from './boundingbox';\r\nimport * as boundingsegment from './boundingsegment';\r\nimport * as boundingsphere from './boundingsphere';\r\n\r\nexport function IntersectionTestShapeSegment(a: shape.BoundingShape, b: point.ISegment2d): point.IPoint2d[] {\r\n    const box = a.getBoundingbox();\r\n    if (box) {\r\n        switch (a.type) {\r\n            case boundingbox.BoundingBox.type: {\r\n                return IntersectionTestBoxSegment((a as boundingbox.BoundingBox).rect, b);\r\n            }\r\n            case boundinghull.BoundingHull.type: {\r\n                return IntersectionTestHullSegment((a as boundinghull.BoundingHull).points, b);\r\n            }\r\n            case boundingsegment.BoundingSegment.type: {\r\n                const pt = IntersectionTestSegmentSegment((a as boundingsegment.BoundingSegment).segment, b);\r\n                return pt ? [pt] : [];\r\n            }\r\n            case boundingsphere.BoundingSphere.type: {\r\n                return IntersectionTestSphereSegment((a as boundingsphere.BoundingSphere).sphere, b);\r\n            }\r\n        }\r\n    }\r\n    return null;\r\n}\r\n\r\nexport function IntersectionTestShapeBox(a: shape.BoundingShape, b: point.IRect2d): boolean {\r\n    const box = a.getBoundingbox();\r\n    if (!box) {\r\n        return false;\r\n    }\r\n    switch (a.type) {\r\n        case boundingbox.BoundingBox.type: {\r\n            return IntersectionTestBoxBox((a as boundingbox.BoundingBox).rect, b);\r\n        }\r\n        case boundinghull.BoundingHull.type: {\r\n            return IntersectionTestBoxHull(b, (a as boundinghull.BoundingHull).points);\r\n        }\r\n        case boundingsegment.BoundingSegment.type: {\r\n            return IntersectionTestBoxSegment(b, (a as boundingsegment.BoundingSegment).segment) != null;\r\n        }\r\n        case boundingsphere.BoundingSphere.type: {\r\n            return IntersectionTestBoxSphere(b, (a as boundingsphere.BoundingSphere).sphere);\r\n        }\r\n        default: {\r\n            return false;\r\n        }\r\n    }\r\n}\r\n\r\nexport function IntersectionTestShapeHull(a: shape.BoundingShape, b: point.IPoint2d[]): boolean {\r\n    const box = a.getBoundingbox();\r\n    if (!box) {\r\n        return false;\r\n    }\r\n    switch (a.type) {\r\n        case boundingbox.BoundingBox.type: {\r\n            return IntersectionTestBoxHull((a as boundingbox.BoundingBox).rect, b);\r\n        }\r\n        case boundinghull.BoundingHull.type: {\r\n            return IntersectionTestHullHull((a as boundinghull.BoundingHull).points, b);\r\n        }\r\n        case boundingsegment.BoundingSegment.type: {\r\n            return IntersectionTestHullSegment(b, (a as boundingsegment.BoundingSegment).segment) != null;\r\n        }\r\n        case boundingsphere.BoundingSphere.type: {\r\n            return IntersectionTestSphereHull((a as boundingsphere.BoundingSphere).sphere, b);\r\n        }\r\n        default: {\r\n            return false;\r\n        }\r\n    }\r\n}\r\n\r\nexport function IntersectionTestShapePoint(a: shape.BoundingShape, b: point.IPoint2d): boolean {\r\n    const box = a.getBoundingbox();\r\n    if (!IntersectionTestBoxPoint(box, b)) {\r\n        return false;\r\n    }\r\n    switch (a.type) {\r\n        case boundingbox.BoundingBox.type: {\r\n            return true;\r\n        }\r\n        case boundinghull.BoundingHull.type: {\r\n            return IntersectionTestHullPoint((a as boundinghull.BoundingHull).points, b);\r\n        }\r\n        case boundingsegment.BoundingSegment.type: {\r\n            return IntersectionTestSegmentPoint((a as boundingsegment.BoundingSegment).segment, b);\r\n        }\r\n        case boundingsphere.BoundingSphere.type: {\r\n            return IntersectionTestSpherePoint((a as boundingsphere.BoundingSphere).sphere, b);\r\n        }\r\n        default: {\r\n            return false;\r\n        }\r\n    }\r\n}\r\n\r\nexport function IntersectionTestShapeShape(a: shape.BoundingShape, b: shape.BoundingShape): boolean {\r\n    const boxA = a.getBoundingbox();\r\n    const boxB = b.getBoundingbox();\r\n    if (!IntersectionTestBoxBox(boxA, boxB)) {\r\n        return false;\r\n    }\r\n    switch (a.type) {\r\n        case boundingbox.BoundingBox.type: {\r\n            switch (b.type) {\r\n                case boundingbox.BoundingBox.type: {\r\n                    return true;\r\n                }\r\n                case boundinghull.BoundingHull.type: {\r\n                    return IntersectionTestBoxHull((a as boundingbox.BoundingBox).rect, (b as boundinghull.BoundingHull).points);\r\n                }\r\n                case boundingsegment.BoundingSegment.type: {\r\n                    return IntersectionTestBoxSegment((a as boundingbox.BoundingBox).rect, (b as boundingsegment.BoundingSegment).segment) != null;\r\n                }\r\n                case boundingsphere.BoundingSphere.type: {\r\n                    return IntersectionTestBoxSphere((a as boundingbox.BoundingBox).rect, (b as boundingsphere.BoundingSphere).sphere);\r\n                }\r\n                default: {\r\n                    return false;\r\n                }\r\n            }\r\n        }\r\n        case boundinghull.BoundingHull.type: {\r\n            switch (b.type) {\r\n                case boundingbox.BoundingBox.type: {\r\n                    return IntersectionTestBoxHull((b as boundingbox.BoundingBox).rect, (a as boundinghull.BoundingHull).points);\r\n                }\r\n                case boundinghull.BoundingHull.type: {\r\n                    return IntersectionTestHullHull((a as boundinghull.BoundingHull).points, (b as boundinghull.BoundingHull).points);\r\n                }\r\n                case boundingsegment.BoundingSegment.type: {\r\n                    return IntersectionTestHullSegment((a as boundinghull.BoundingHull).points, (b as boundingsegment.BoundingSegment).segment) != null;\r\n                }\r\n                case boundingsphere.BoundingSphere.type: {\r\n                    return IntersectionTestSphereHull((b as boundingsphere.BoundingSphere).sphere, (a as boundinghull.BoundingHull).points);\r\n                }\r\n                default: {\r\n                    return false;\r\n                }\r\n            }\r\n        }\r\n        case boundingsegment.BoundingSegment.type: {\r\n            switch (b.type) {\r\n                case boundingbox.BoundingBox.type: {\r\n                    return IntersectionTestBoxSegment((b as boundingbox.BoundingBox).rect, (a as boundingsegment.BoundingSegment).segment) != null;\r\n                }\r\n                case boundinghull.BoundingHull.type: {\r\n                    return IntersectionTestHullSegment((b as boundinghull.BoundingHull).points, (a as boundingsegment.BoundingSegment).segment) != null;\r\n                }\r\n                case boundingsegment.BoundingSegment.type: {\r\n                    return IntersectionTestSegmentSegment((b as boundingsegment.BoundingSegment).segment, (a as boundingsegment.BoundingSegment).segment) != null;\r\n                }\r\n                case boundingsphere.BoundingSphere.type: {\r\n                    return IntersectionTestSphereSegment((b as boundingsphere.BoundingSphere).sphere, (a as boundingsegment.BoundingSegment).segment) != null;\r\n                }\r\n                default: {\r\n                    return false;\r\n                }\r\n            }\r\n        }\r\n        case boundingsphere.BoundingSphere.type: {\r\n            switch (b.type) {\r\n                case boundingbox.BoundingBox.type: {\r\n                    return IntersectionTestBoxSphere((b as boundingbox.BoundingBox).rect, (a as boundingsphere.BoundingSphere).sphere);\r\n                }\r\n                case boundinghull.BoundingHull.type: {\r\n                    return IntersectionTestSphereHull((a as boundingsphere.BoundingSphere).sphere, (b as boundinghull.BoundingHull).points);\r\n                }\r\n                case boundingsegment.BoundingSegment.type: {\r\n                    return IntersectionTestSphereSegment((a as boundingsphere.BoundingSphere).sphere, (b as boundingsegment.BoundingSegment).segment) != null;\r\n                }\r\n                case boundingsphere.BoundingSphere.type: {\r\n                    return IntersectionTestSphereSphere((a as boundingsphere.BoundingSphere).sphere, (b as boundingsphere.BoundingSphere).sphere);\r\n                }\r\n                default: {\r\n                    return false;\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport function IntersectionTestBoxBox(a: point.IRect2d, b: point.IRect2d): boolean {\r\n    return a.x <= b.x + b.w && a.x + a.w >= b.x && a.y <= b.y + b.h && a.y + a.h >= b.y;\r\n}\r\n\r\nexport function IntersectionTestBoxPoint(a: point.IRect2d, b: point.IPoint2d): boolean {\r\n    return b.x >= a.x && b.x <= a.x + a.w && b.y >= a.y && b.y <= a.y + a.h;\r\n}\r\n\r\nexport function IntersectionTestBoxHull(a: point.IRect2d, b: point.IPoint2d[]): boolean {\r\n    return IntersectionTestHullHull([point.GetTopLeft(a), point.GetBottomLeft(a), point.GetBottomRight(a), point.GetTopRight(a)], b);\r\n}\r\n\r\nexport function IntersectionTestBoxSegment(a: point.IRect2d, b: point.ISegment2d): point.IPoint2d[] {\r\n    return IntersectionTestHullSegment([point.GetTopLeft(a), point.GetBottomLeft(a), point.GetBottomRight(a), point.GetTopRight(a)], b);\r\n}\r\n\r\nexport function IntersectionTestBoxSphere(a: point.IRect2d, b: point.ISphere2d): boolean {\r\n    const pt = point.ClampPoint(b.center, { x: a.x, y: a.y }, { x: a.x + a.w - 1, y: a.y + a.h - 1 });\r\n    const v = point.GetVector(pt, b.center);\r\n    return point.DotProduct(v, v) < b.radius * b.radius;\r\n}\r\n\r\nexport function IntersectionTestSphereHull(a: point.ISphere2d, b: point.IPoint2d[]): boolean {\r\n    const r2 = a.radius * a.radius;\r\n    for (let i = 0; i < b.length; i++) {\r\n        const dx = a.center.x - b[i].x;\r\n        const dy = a.center.y - b[i].y;\r\n        if (dx * dx + dy * dy < r2) {\r\n            return true;\r\n        }\r\n    }\r\n    for (let i = 0; i < b.length; i++) {\r\n        const t = IntersectionTestSphereSegment(a, { start: b[i], end: b[(i + 1) % b.length] });\r\n        if (t !== null && t.length > 0) {\r\n            return true;\r\n        }\r\n    }\r\n    return IntersectionTestHullPoint(b, a.center);\r\n}\r\n\r\nexport function IntersectionTestHullPoint(a: point.IPoint2d[], b: point.IPoint2d): boolean {\r\n    for (let i = 0; i < a.length; i++) {\r\n        const v1 = point.GetVector(b, a[i]);\r\n        const v2 = point.GetVector(b, a[(i + 1) % a.length]);\r\n        if (point.CrossProduct(v1, v2) > 0) {\r\n            return false;\r\n        }\r\n    }\r\n    return true;\r\n}\r\n\r\nexport function IntersectionTestSphereSphere(a: point.ISphere2d, b: point.ISphere2d): boolean {\r\n    const dx = a.center.x - b.center.x;\r\n    const dy = a.center.y - b.center.y;\r\n    const r = a.radius + b.radius;\r\n    return dx * dx + dy * dy < r * r;\r\n}\r\n\r\nexport function IntersectionTestSphereSegment(a: point.ISphere2d, b: point.ISegment2d): point.IPoint2d[] {\r\n    const d = point.GetVector(b.start, b.end);\r\n    const f = point.GetVector(a.center, b.start);\r\n    const A = point.DotProduct(d, d);\r\n    const B = 2 * point.DotProduct(f, d);\r\n    const C = point.DotProduct(f, f) - a.radius * a.radius;\r\n    let discriminant = B * B - 4 * A * C;\r\n    if (discriminant < 0) {\r\n        return null;\r\n    }\r\n    discriminant = Math.sqrt(discriminant);\r\n    let t1 = (-B - discriminant) / (2 * A);\r\n    let t2 = (-B + discriminant) / (2 * A);\r\n    if (t1 > t2) {\r\n        const tmp = t1;\r\n        t1 = t2;\r\n        t2 = tmp;\r\n    }\r\n    const intersectionPoints: point.IPoint2d[] = [];\r\n    if (t1 >= 0 && t1 <= 1) {\r\n        intersectionPoints.push({ x: b.start.x + t1 * d.x, y: b.start.y + t1 * d.y });\r\n    }\r\n    if (t2 >= 0 && t2 <= 1) {\r\n        intersectionPoints.push({ x: b.start.x + t2 * d.x, y: b.start.y + t2 * d.y });\r\n    }\r\n    return intersectionPoints;\r\n}\r\n\r\nexport function IntersectionTestHullSegment(a: point.IPoint2d[], b: point.ISegment2d): point.IPoint2d[] {\r\n    if (IntersectionTestHullPoint(a, b.start) && IntersectionTestHullPoint(a, b.end)) {\r\n        return [];\r\n    }\r\n    const result = [];\r\n    for (let i = 0; i < a.length; i++) {\r\n        const edge = {\r\n            start: a[i],\r\n            end: a[(i + 1) % a.length]\r\n        };\r\n        const intersectedPoint = IntersectionTestSegmentSegment(edge, b);\r\n        if (intersectedPoint) {\r\n            result.push(intersectedPoint);\r\n        }\r\n    }\r\n    if (result.length > 1) {\r\n        result.sort((p, q) => {\r\n            return point.DistanceSq(p, b.start) - point.DistanceSq(q, b.start);\r\n        });\r\n    }\r\n    return result.length > 0 ? result : null;\r\n}\r\n\r\nexport function IntersectionTestHullHull(a: point.IPoint2d[], b: point.IPoint2d[]): boolean {\r\n    const polygons = [a, b];\r\n    for (let n = 0; n < 2; n++) {\r\n        const polygon = polygons[n];\r\n        for (let edge = 0; edge < polygon.length; edge++) {\r\n            const edgeX = polygon[(edge + 1) % polygon.length].x - polygon[edge].x;\r\n            const edgeY = polygon[(edge + 1) % polygon.length].y - polygon[edge].y;\r\n            const mag = Math.sqrt(edgeX * edgeX + edgeY * edgeY);\r\n            if (mag < 1) {\r\n                continue;\r\n            }\r\n            const nx = -edgeY / mag;\r\n            const ny = edgeX / mag;\r\n            const minmax = [{ min: 9999999, max: -9999999 }, { min: 9999999, max: -9999999 }];\r\n            for (let i = 0; i < 2; i++) {\r\n                polygons[i].forEach(point => {\r\n                    const proj = point.x * nx + point.y * ny;\r\n                    if (proj < minmax[i].min) {\r\n                        minmax[i].min = proj;\r\n                    }\r\n                    if (proj > minmax[i].max) {\r\n                        minmax[i].max = proj;\r\n                    }\r\n                });\r\n            }\r\n            if (minmax[0].min > minmax[1].max || minmax[0].max < minmax[1].min) {\r\n                return false;\r\n            }\r\n        }\r\n    }\r\n    return true;\r\n}\r\n\r\nexport function IntersectionTestSpherePoint(a: point.ISphere2d, b: point.IPoint2d): boolean {\r\n    const dx = a.center.x - b.x;\r\n    const dy = a.center.y - b.y;\r\n    return dx * dx + dy * dy < a.radius * a.radius;\r\n}\r\n\r\nexport function IntersectionTestSegmentPoint(s: point.ISegment2d, p: point.IPoint2d): boolean {\r\n    let minx = s.start.x;\r\n    let miny = s.start.y;\r\n    let maxx = s.end.x;\r\n    let maxy = s.end.y;\r\n    if (minx > maxx) {\r\n        const tmp = minx;\r\n        minx = maxx;\r\n        maxx = tmp;\r\n    }\r\n    if (miny > maxy) {\r\n        const tmp = miny;\r\n        miny = maxy;\r\n        maxy = tmp;\r\n    }\r\n    if (p.x < minx || p.x > maxx || p.y < miny || p.y > maxy) {\r\n        return false;\r\n    }\r\n    if (maxx !== minx) {\r\n        const deltay = Math.round(miny + ((maxy - miny) * (p.x - minx)) / (maxx - minx)) - p.y;\r\n        return deltay >= -1 && deltay <= 1;\r\n    } else if (maxy !== miny) {\r\n        const deltax = Math.round(minx + ((maxx - minx) * (p.y - miny)) / (maxy - miny)) - p.x;\r\n        return deltax >= -1 && deltax <= 1;\r\n    } else {\r\n        return p.x === minx && p.y === miny;\r\n    }\r\n}\r\n\r\nexport function IntersectionTestSegmentSegment(s1: point.ISegment2d, s2: point.ISegment2d): point.IPoint2d {\r\n    function isSameSign(a: number, b: number) {\r\n        return (a >= 0 && b >= 0) || (a <= 0 && b <= 0);\r\n    }\r\n    const x1 = s1.start.x;\r\n    const y1 = s1.start.y;\r\n    const x2 = s1.end.x;\r\n    const y2 = s1.end.y;\r\n    const x3 = s2.start.x;\r\n    const y3 = s2.start.y;\r\n    const x4 = s2.end.x;\r\n    const y4 = s2.end.y;\r\n    const Ax = x2 - x1;\r\n    const Bx = x3 - x4;\r\n    let x1lo;\r\n    let x1hi;\r\n    let y1lo;\r\n    let y1hi;\r\n    let num;\r\n    let offset;\r\n\r\n    if (Ax < 0) {\r\n        x1lo = x2;\r\n        x1hi = x1;\r\n    } else {\r\n        x1hi = x2;\r\n        x1lo = x1;\r\n    }\r\n\r\n    if (Bx > 0) {\r\n        if (x1hi < x4 || x3 < x1lo) {\r\n            return null;\r\n        }\r\n    } else {\r\n        if (x1hi < x3 || x4 < x1lo) {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    const Ay = y2 - y1;\r\n    const By = y3 - y4;\r\n\r\n    if (Ay < 0) {\r\n        y1lo = y2;\r\n        y1hi = y1;\r\n    } else {\r\n        y1hi = y2;\r\n        y1lo = y1;\r\n    }\r\n\r\n    if (By > 0) {\r\n        if (y1hi < y4 || y3 < y1lo) {\r\n            return null;\r\n        }\r\n    } else {\r\n        if (y1hi < y3 || y4 < y1lo) {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    const Cx = x1 - x3;\r\n    const Cy = y1 - y3;\r\n    const f = Ay * Bx - Ax * By;\r\n    if (f === 0) {\r\n        return null;\r\n    }\r\n\r\n    const d = By * Cx - Bx * Cy;\r\n    if (f > 0) {\r\n        if (d < 0 || d > f) {\r\n            return null;\r\n        }\r\n    } else {\r\n        if (d > 0 || d < f) {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    const e = Ax * Cy - Ay * Cx;\r\n    if (f > 0) {\r\n        if (e < 0 || e > f) {\r\n            return null;\r\n        }\r\n    } else {\r\n        if (e > 0 || e < f) {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    num = d * Ax;\r\n    offset = isSameSign(num, f) ? f / 2 : -f / 2;\r\n    let x = x1 + (((num + offset) / f) >> 0);\r\n    num = d * Ay;\r\n    offset = isSameSign(num, f) ? f / 2 : -f / 2;\r\n    let y = y1 + (((num + offset) / f) >> 0);\r\n\r\n    return { x: x, y: y };\r\n}\r\n","import { Matrix2d } from './transform';\nimport { BoundingShape } from './boundingshape';\nimport { IntersectionTestShapePoint } from './intersect';\n\nexport type CullResult = { [z: number]: { object: EventObserver; z: number; transform: Matrix2d }[] };\nexport type EventHandler<T extends BaseEvent> = (evt: T) => void;\n\nexport enum EventListenerOrder {\n    FIRST = 1,\n    LAST = 2\n}\n\nexport class BaseEvent {\n    readonly type: string;\n    eaten: boolean;\n    constructor(type: string) {\n        this.type = type;\n        this.eaten = false;\n    }\n    eat(): void {\n        this.eaten = true;\n    }\n}\n\nexport class EvtComponentBeforeAttach extends BaseEvent {\n    static readonly type: string = '@componentBeforeAttach';\n    object: BaseObject;\n    allow: boolean;\n    constructor(object: BaseObject) {\n        super(EvtComponentBeforeAttach.type);\n        this.object = object;\n        this.allow = true;\n    }\n}\n\nexport class EvtComponentAttached extends BaseEvent {\n    static readonly type: string = '@componentAttached';\n    constructor() {\n        super(EvtComponentAttached.type);\n    }\n}\n\nexport class EvtComponentBeforeDetach extends BaseEvent {\n    static readonly type: string = '@componentBeforeDetach';\n    allow: boolean;\n    constructor() {\n        super(EvtComponentBeforeDetach.type);\n        this.allow = true;\n    }\n}\n\nexport class EvtComponentDetached extends BaseEvent {\n    static readonly type: string = '@componentDetached';\n    constructor() {\n        super(EvtComponentDetached.type);\n    }\n}\n\nexport class EvtUpdate extends BaseEvent {\n    static readonly type: string = '@update';\n    public readonly deltaTime: number;\n    public readonly elapsedTime: number;\n    public readonly frameStamp: number;\n    constructor(deltaTime: number, elapsedTime: number, frameStamp: number) {\n        super(EvtUpdate.type);\n        this.deltaTime = deltaTime;\n        this.elapsedTime = elapsedTime;\n        this.frameStamp = frameStamp;\n    }\n}\n\nexport class EvtCull extends BaseEvent {\n    static readonly type: string = '@cull';\n    readonly canvasWidth: number;\n    readonly canvasHeight: number;\n    readonly result: CullResult;\n    constructor(w: number, h: number) {\n        super(EvtCull.type);\n        this.canvasWidth = w;\n        this.canvasHeight = h;\n        this.result = {};\n    }\n    addObject(object: EventObserver, z: number, transform: Matrix2d): void {\n        let objectList = this.result[z] || [];\n        objectList.push({ object: object, z: z, transform: transform });\n        this.result[z] = objectList;\n    }\n}\n\nexport class EvtDraw extends BaseEvent {\n    static readonly type: string = '@draw';\n    readonly canvas: Canvas;\n    readonly z: number;\n    readonly transform: Matrix2d;\n    constructor(canvas: Canvas, z: number, transform: Matrix2d) {\n        super(EvtDraw.type);\n        this.canvas = canvas;\n        this.z = z;\n        this.transform = transform;\n    }\n}\n\nexport class EvtHitTest extends BaseEvent {\n    static readonly type: string = '@hittest';\n    x: number;\n    y: number;\n    result: boolean;\n    constructor(x: number, y: number) {\n        super(EvtHitTest.type);\n        this.x = x;\n        this.y = y;\n        this.result = false;\n    }\n}\n\nexport class EvtGetBoundingShape extends BaseEvent {\n    static readonly type: string = '@getboundingshape';\n    shape?: BoundingShape;\n    constructor() {\n        super(EvtGetBoundingShape.type);\n    }\n}\n\nexport class EvtFrame extends BaseEvent {\n    static readonly type: string = '@frame';\n    readonly deltaTime: number;\n    readonly elapsedTime: number;\n    readonly frameStamp: number;\n    constructor(deltaTime: number, elapsedTime: number, frameStamp: number) {\n        super(EvtFrame.type);\n        this.deltaTime = deltaTime;\n        this.elapsedTime = elapsedTime;\n        this.frameStamp = frameStamp;\n    }\n}\n\nexport class EvtFocus extends BaseEvent {\n    static readonly type: string = '@focus';\n    readonly focus: boolean;\n    constructor(focus: boolean) {\n        super(EvtFocus.type);\n        this.focus = focus;\n    }\n}\n\nexport class EvtKeyboard extends BaseEvent {\n    readonly key: string;\n    readonly keyCode: number;\n    readonly shiftDown: boolean;\n    readonly altDown: boolean;\n    readonly ctrlDown: boolean;\n    readonly metaDown: boolean;\n    constructor(type: string, key: string, code: number, shift: boolean, alt: boolean, ctrl: boolean, meta: boolean) {\n        super(type);\n        this.key = key;\n        this.keyCode = code;\n        this.shiftDown = shift;\n        this.altDown = alt;\n        this.ctrlDown = ctrl;\n        this.metaDown = meta;\n    }\n}\n\nexport class EvtKeyDown extends EvtKeyboard {\n    static readonly type: string = '@keydown';\n    constructor(key: string, code: number, shift: boolean, alt: boolean, ctrl: boolean, meta: boolean) {\n        super(EvtKeyDown.type, key, code, shift, alt, ctrl, meta);\n    }\n}\n\nexport class EvtKeyUp extends EvtKeyboard {\n    static readonly type: string = '@keyup';\n    constructor(key: string, code: number, shift: boolean, alt: boolean, ctrl: boolean, meta: boolean) {\n        super(EvtKeyUp.type, key, code, shift, alt, ctrl, meta);\n    }\n}\n\nexport class EvtKeyPress extends EvtKeyboard {\n    static readonly type: string = '@keypress';\n    constructor(key: string, code: number, shift: boolean, alt: boolean, ctrl: boolean, meta: boolean) {\n        super(EvtKeyPress.type, key, code, shift, alt, ctrl, meta);\n    }\n}\n\nexport class EvtMouse extends BaseEvent {\n    readonly x: number;\n    readonly y: number;\n    readonly button: number;\n    readonly shiftDown: boolean;\n    readonly altDown: boolean;\n    readonly ctrlDown: boolean;\n    readonly metaDown: boolean;\n    bubble: boolean;\n    constructor(type: string, x: number, y: number, button: number, shiftDown: boolean, altDown: boolean, ctrlDown: boolean, metaDown: boolean) {\n        super(type);\n        this.x = x;\n        this.y = y;\n        this.button = button;\n        this.shiftDown = shiftDown;\n        this.altDown = altDown;\n        this.ctrlDown = ctrlDown;\n        this.metaDown = metaDown;\n        this.bubble = true;\n    }\n    cancelBubble() {\n        this.bubble = false;\n    }\n}\n\nexport class EvtMouseDown extends EvtMouse {\n    static readonly type: string = '@mousedown';\n    constructor(x: number, y: number, button: number, shiftDown: boolean, altDown: boolean, ctrlDown: boolean, metaDown: boolean) {\n        super(EvtMouseDown.type, x, y, button, shiftDown, altDown, ctrlDown, metaDown);\n    }\n}\n\nexport class EvtMouseUp extends EvtMouse {\n    static readonly type: string = '@mouseup';\n    constructor(x: number, y: number, button: number, shiftDown: boolean, altDown: boolean, ctrlDown: boolean, metaDown: boolean) {\n        super(EvtMouseUp.type, x, y, button, shiftDown, altDown, ctrlDown, metaDown);\n    }\n}\n\nexport class EvtMouseMove extends EvtMouse {\n    static readonly type: string = '@mousemove';\n    constructor(x: number, y: number, button: number, shiftDown: boolean, altDown: boolean, ctrlDown: boolean, metaDown: boolean) {\n        super(EvtMouseMove.type, x, y, button, shiftDown, altDown, ctrlDown, metaDown);\n    }\n}\n\nexport class EvtMouseEnter extends BaseEvent {\n    static readonly type: string = '@mouseenter';\n    constructor() {\n        super(EvtMouseEnter.type);\n    }\n}\n\nexport class EvtMouseLeave extends BaseEvent {\n    static readonly type: string = '@mouseleave';\n    constructor() {\n        super(EvtMouseLeave.type);\n    }\n}\n\nexport class EvtClick extends EvtMouse {\n    static readonly type: string = '@click';\n    constructor(x: number, y: number, button: number, shiftDown: boolean, altDown: boolean, ctrlDown: boolean, metaDown: boolean) {\n        super(EvtClick.type, x, y, button, shiftDown, altDown, ctrlDown, metaDown);\n    }\n}\n\nexport class EvtDblClick extends EvtMouse {\n    static readonly type: string = '@dblclick';\n    constructor(x: number, y: number, button: number, shiftDown: boolean, altDown: boolean, ctrlDown: boolean, metaDown: boolean) {\n        super(EvtDblClick.type, x, y, button, shiftDown, altDown, ctrlDown, metaDown);\n    }\n}\n\nexport class EvtDragBegin extends EvtMouse {\n    static readonly type: string = '@dragbegin';\n    data: any;\n    constructor(x: number, y: number, button: number, shiftDown: boolean, altDown: boolean, ctrlDown: boolean, metaDown: boolean) {\n        super(EvtDragBegin.type, x, y, button, shiftDown, altDown, ctrlDown, metaDown);\n        this.data = null;\n    }\n}\n\nexport class EvtDragEnd extends EvtMouse {\n    static readonly type: string = '@dragend';\n    data: any;\n    constructor(x: number, y: number, button: number, shiftDown: boolean, altDown: boolean, ctrlDown: boolean, metaDown: boolean, data: any) {\n        super(EvtDragEnd.type, x, y, button, shiftDown, altDown, ctrlDown, metaDown);\n        this.data = data;\n    }\n}\n\nexport class EvtDragging extends EvtMouse {\n    static readonly type: string = '@dragging';\n    data: any;\n    constructor(x: number, y: number, button: number, shiftDown: boolean, altDown: boolean, ctrlDown: boolean, metaDown: boolean, data: any) {\n        super(EvtDragging.type, x, y, button, shiftDown, altDown, ctrlDown, metaDown);\n        this.data = data;\n    }\n}\n\nexport class EvtDragOver extends EvtMouse {\n    static readonly type: string = '@dragover';\n    readonly object: SceneObject;\n    readonly data: any;\n    constructor(x: number, y: number, button: number, shiftDown: boolean, altDown: boolean, ctrlDown: boolean, metaDown: boolean, object: SceneObject, data: any) {\n        super(EvtDragOver.type, x, y, button, shiftDown, altDown, ctrlDown, metaDown);\n        this.object = object;\n        this.data = data;\n    }\n}\n\nexport class EvtDragDrop extends EvtMouse {\n    static readonly type: string = '@dragdrop';\n    readonly object: SceneObject;\n    readonly data: any;\n    constructor(x: number, y: number, button: number, shiftDown: boolean, altDown: boolean, ctrlDown: boolean, metaDown: boolean, object: SceneObject, data: any) {\n        super(EvtDragDrop.type, x, y, button, shiftDown, altDown, ctrlDown, metaDown);\n        this.object = object;\n        this.data = data;\n    }\n}\n\nexport class EvtResize extends BaseEvent {\n    static readonly type: string = '@resize';\n    constructor() {\n        super(EvtResize.type);\n    }\n}\n\nexport class EvtCanvasResize extends BaseEvent {\n    static readonly type: string = '@canvasresize';\n    readonly view: SceneView;\n    constructor(view: SceneView) {\n        super(EvtCanvasResize.type);\n        this.view = view;\n    }\n}\n\nexport class EvtGetProp extends BaseEvent {\n    static readonly type: string = '@getprop';\n    readonly propName: string;\n    propValue: any;\n    constructor(propName: string) {\n        super(EvtGetProp.type);\n        this.propName = propName;\n        this.propValue = undefined;\n    }\n}\n\nexport class EvtSetProp extends BaseEvent {\n    static readonly type: string = '@setprop';\n    readonly propName: string;\n    readonly propValue: any;\n    constructor(propName: string, propValue: any) {\n        super(EvtSetProp.type);\n        this.propName = propName;\n        this.propValue = propValue;\n    }\n}\n\nexport class EvtSceneViewPageWillChange extends BaseEvent {\n    static readonly type: string = '@scenviewpagewillchange';\n    readonly view: SceneView;\n    readonly oldPage: string;\n    readonly newPage: string;\n    constructor(view: SceneView, oldPage: string, newPage: string) {\n        super(EvtSceneViewPageWillChange.type);\n        this.view = view;\n        this.oldPage = oldPage;\n        this.newPage = newPage;\n    }\n}\n\nexport class EvtSceneViewPageChanged extends BaseEvent {\n    static readonly type: string = '@sceneviewpagechanged';\n    readonly view: SceneView;\n    readonly oldPage: string;\n    readonly newPage: string;\n    constructor(view: SceneView, oldPage: string, newPage: string) {\n        super(EvtSceneViewPageChanged.type);\n        this.view = view;\n        this.oldPage = oldPage;\n        this.newPage = newPage;\n    }\n}\n\nexport class EvtSysInfo {\n    private static _isWindows = navigator.platform === 'Win32' || navigator.platform === 'Windows';\n    private static _isMac = navigator.platform === 'Mac68K' || navigator.platform === 'MacPPC' || navigator.platform === 'Macintosh' || navigator.platform === 'MacIntel';\n    private static _isX11 = navigator.platform === 'X11';\n    private static _isLinux = String(navigator.platform).indexOf('Linux') >= 0;\n    private static _isAndroid = (navigator.userAgent.toLowerCase().match(/android/i) || []).indexOf('android') >= 0;\n    static isWindows() {\n        return this._isWindows;\n    }\n    static isMac() {\n        return this._isMac;\n    }\n    static isUnix() {\n        return this._isX11 && !this._isWindows && !this._isMac;\n    }\n    static isLinux() {\n        return this._isLinux;\n    }\n    static isAndroid() {\n        return this._isLinux && this._isAndroid;\n    }\n}\n\nexport class EventObserver {\n    on<T extends BaseEvent>(type: string, handler: EventHandler<T>, order?: EventListenerOrder): void {\n        App.addEventListener(type, this, handler, order || EventListenerOrder.FIRST);\n    }\n    off<T extends BaseEvent>(type: string, handler?: EventHandler<T>): void {\n        App.removeEventListener(type, this, handler);\n    }\n    trigger(evt: BaseEvent): void {\n        App.triggerEvent(this, evt);\n    }\n    triggerEx(evt: BaseEvent): void {\n        this.trigger(evt);\n    }\n    post<T extends BaseEvent>(evt: T): void {\n        App.postEvent(this, evt);\n    }\n}\n\ntype HitTestResult = SceneObject[];\ntype EventHandlerList = { handler: EventHandler<any>; next: EventHandlerList };\ntype EventHandlerEntry = { handlers: EventHandlerList; bindObject: any };\n\nexport class App {\n    static elapsedTime = 0;\n    static deltaTime = 0;\n    private static eventQueue: { evt: BaseEvent; target: any }[] = [];\n    private static eventListeners: { [eventType: string]: EventHandlerEntry[] } = {};\n    private static running = false;\n    private static lastFrameTime = 0;\n    private static firstFrameTime = 0;\n    private static frameStamp = 0;\n    private static capturedView: SceneView = null;\n    private static hoverView: SceneView = null;\n    private static focusView: SceneView = null;\n    private static views: SceneView[] = [];\n    private static clickTick: number = 0;\n    private static dblClickTick: number = 0;\n    private static clickTime: number = 400;\n    private static dblclickTime: number = 400;\n    static postEvent(target: any, evt: BaseEvent): void {\n        this.eventQueue.push({ evt: evt, target: target });\n    }\n    static triggerEvent(target: any, evt: BaseEvent): void {\n        this.processEvent(evt, target);\n    }\n    static processPendingEvents(): void {\n        const events = this.eventQueue;\n        this.eventQueue = [];\n        events.forEach((evt: { evt: BaseEvent; target: any }) => {\n            this.processEvent(evt.evt, evt.target);\n        });\n    }\n    static addEventListener(eventType: string, bindObject: any, handler: EventHandler<any>, order: EventListenerOrder) {\n        let handlerList = this.eventListeners[eventType] || [];\n        for (let i = 0; i < handlerList.length; i++) {\n            if (handlerList[i].bindObject === bindObject) {\n                if (order === EventListenerOrder.FIRST) {\n                    handlerList[i].handlers = {\n                        handler: handler,\n                        next: handlerList[i].handlers\n                    };\n                } else {\n                    let h = handlerList[i].handlers;\n                    while (h.next) {\n                        h = h.next;\n                    }\n                    h.next = { handler: handler, next: null };\n                }\n                return;\n            }\n        }\n        handlerList.push({\n            bindObject: bindObject,\n            handlers: {\n                handler: handler,\n                next: null\n            }\n        });\n        this.eventListeners[eventType] = handlerList;\n    }\n    static removeEventListener(eventType: string, bindObject: any, handler?: EventHandler<any>) {\n        let handlerList = this.eventListeners[eventType] || [];\n        for (let i = 0; i < handlerList.length; i++) {\n            if (handlerList[i].bindObject === bindObject) {\n                if (handler) {\n                    let h = handlerList[i].handlers;\n                    let ph = null;\n                    while (h && h.handler !== handler) {\n                        ph = h;\n                        h = h.next;\n                    }\n                    if (h) {\n                        if (ph) {\n                            ph.next = h.next;\n                        } else {\n                            handlerList[i].handlers = h.next;\n                        }\n                    }\n                    if (!handlerList[i].handlers) {\n                        handlerList.splice(i, 1);\n                    }\n                } else {\n                    handlerList.splice(i, 1);\n                    break;\n                }\n            }\n        }\n    }\n    static run() {\n        function frame(ts: number) {\n            if (App.running) {\n                if (App.lastFrameTime === 0) {\n                    App.lastFrameTime = ts;\n                    App.firstFrameTime = ts;\n                }\n                App.deltaTime = ts - App.lastFrameTime;\n                App.elapsedTime = ts - App.firstFrameTime;\n                App.lastFrameTime = ts;\n                App.frameStamp++;\n                App.processPendingEvents();\n                App.triggerEvent(null, new EvtFrame(App.deltaTime, App.elapsedTime, App.frameStamp));\n                if (App.running) {\n                    requestAnimationFrame(frame);\n                }\n            }\n        }\n        if (!this.running) {\n            this.running = true;\n            this.lastFrameTime = 0;\n            this.firstFrameTime = 0;\n            this.elapsedTime = 0;\n            this.deltaTime = 0;\n            this.frameStamp = 0;\n            this.init();\n            requestAnimationFrame(frame);\n        }\n    }\n    static addView(view: SceneView): boolean {\n        if (view && view.canvas && !this.findView(view.canvas.canvas)) {\n            this.views.push(view);\n            if (!this.focusView) {\n                this.setFocusView(view);\n            }\n            return true;\n        }\n        return false;\n    }\n    static addCanvas(canvas: HTMLCanvasElement, doubleBuffer?: boolean): SceneView {\n        if (!this.findView(canvas)) {\n            const view = new SceneView(canvas, doubleBuffer === undefined ? false : doubleBuffer);\n            return this.addView(view) ? view : null;\n        }\n        return null;\n    }\n    static setFocusView(view: SceneView) {\n        if (this.focusView !== view) {\n            if (this.focusView) {\n                this.focusView.trigger(new EvtFocus(false));\n            }\n            this.focusView = view;\n            if (this.focusView) {\n                this.focusView.trigger(new EvtFocus(true));\n            }\n        }\n    }\n    static findView(canvas: HTMLCanvasElement): SceneView {\n        for (let i = 0; i < this.views.length; i++) {\n            if (this.views[i].canvas.canvas === canvas) {\n                return this.views[i];\n            }\n        }\n        return null;\n    }\n    static removeView(canvas: HTMLCanvasElement): void {\n        for (let i = 0; i < this.views.length; i++) {\n            if (this.views[i].canvas.canvas === canvas) {\n                this.views.splice(i, 1);\n            }\n        }\n    }\n    static setCapture(view: SceneView) {\n        this.capturedView = view;\n    }\n    private static init() {\n        this.initEventListeners();\n    }\n    private static processEvent(evt: BaseEvent, target: any): void {\n        let handlerList = this.eventListeners[evt.type];\n        if (handlerList) {\n            for (let i = 0; i < handlerList.length; i++) {\n                const entry = handlerList[i];\n                if (!target || entry.bindObject === target) {\n                    let h = entry.handlers;\n                    while (h) {\n                        h.handler.call(entry.bindObject, evt);\n                        if (evt.eaten) {\n                            break;\n                        }\n                        h = h.next;\n                    }\n                    if (target) {\n                        break;\n                    }\n                }\n            }\n        }\n    }\n    private static hitView(x: number, y: number): SceneView {\n        if (this.capturedView !== null) {\n            return this.capturedView;\n        }\n        for (let i = 0; i < this.views.length; i++) {\n            const view = this.views[i];\n            const rc = view.canvas.viewport_rect;\n            if (x >= rc.x && x < rc.x + rc.w && y >= rc.y && y < rc.y + rc.h) {\n                return view;\n            }\n        }\n        return null;\n    }\n    private static resizeHandler() {\n        let e = new EvtResize();\n        this.views.forEach((view: SceneView) => {\n            view.triggerEx(e);\n        });\n    }\n    private static mouseDownHandler(ev: MouseEvent) {\n        this.clickTick = Date.now();\n        let view = this.hitView(ev.clientX, ev.clientY);\n        if (view !== null) {\n            view.handleMouseDown(ev);\n        }\n    }\n    private static mouseUpHandler(ev: MouseEvent) {\n        let view = this.hitView(ev.clientX, ev.clientY);\n        if (view !== null) {\n            let tick = Date.now();\n            if (tick < this.clickTick + this.clickTime) {\n                if (tick < this.dblClickTick + this.dblclickTime) {\n                    view.handleDblClick(ev);\n                    this.dblClickTick = 0;\n                } else {\n                    view.handleClick(ev);\n                    this.dblClickTick = tick;\n                }\n            } else {\n                this.dblClickTick = 0;\n            }\n            view.handleMouseUp(ev);\n            this.clickTick = 0;\n        } else {\n            this.clickTick = 0;\n            this.dblClickTick = 0;\n        }\n    }\n    private static mouseMoveHandler(ev: MouseEvent) {\n        let view = this.hitView(ev.clientX, ev.clientY);\n        if (view !== this.hoverView) {\n            if (this.hoverView) {\n                this.hoverView.triggerEx(new EvtMouseLeave());\n                this.hoverView = null;\n            }\n            if (view !== null) {\n                this.hoverView = view;\n                view.triggerEx(new EvtMouseEnter());\n            }\n        }\n        if (view !== null) {\n            const rc = view.canvas.viewport_rect;\n            view.updateHitObjects(ev.clientX - rc.x, ev.clientY - rc.y);\n            view.handleMouseMove(ev);\n        }\n    }\n    private static keyDownHandler(ev: KeyboardEvent) {\n        if (this.focusView) {\n            this.focusView.trigger(new EvtKeyDown(ev.key, ev.keyCode, ev.shiftKey, ev.altKey, ev.ctrlKey, ev.metaKey));\n        }\n    }\n    private static keyUpHandler(ev: KeyboardEvent) {\n        if (this.focusView) {\n            this.focusView.trigger(new EvtKeyUp(ev.key, ev.keyCode, ev.shiftKey, ev.altKey, ev.ctrlKey, ev.metaKey));\n        }\n    }\n    private static keyPressHandler(ev: KeyboardEvent) {\n        if (this.focusView) {\n            this.focusView.trigger(new EvtKeyPress(ev.key, ev.keyCode, ev.shiftKey, ev.altKey, ev.ctrlKey, ev.metaKey));\n        }\n    }\n    private static initEventListeners(): void {\n        window.addEventListener('resize', this.resizeHandler.bind(this));\n        window.addEventListener(window.onpointerdown ? 'pointerdown' : 'mousedown', this.mouseDownHandler.bind(this));\n        window.addEventListener(window.onpointerup ? 'pointerup' : 'mouseup', this.mouseUpHandler.bind(this));\n        window.addEventListener(window.onpointermove ? 'pointermove' : 'mousemove', this.mouseMoveHandler.bind(this));\n        window.addEventListener('keydown', this.keyDownHandler.bind(this));\n        window.addEventListener('keyup', this.keyUpHandler.bind(this));\n        window.addEventListener('keypress', this.keyPressHandler.bind(this));\n    }\n}\n\nexport class Component extends EventObserver {\n    readonly type: string;\n    object: BaseObject | null;\n    constructor(type: string) {\n        super();\n        this.type = type;\n        this.object = null;\n    }\n    toString(): string {\n        return `<Component: ${this.type}>`;\n    }\n}\n\nexport class BaseObject extends EventObserver {\n    private components: { [type: string]: Component[] };\n    [name: string]: any;\n    constructor() {\n        super();\n        this.components = {};\n    }\n    toString(): string {\n        return '<BaseObject>';\n    }\n    addComponent(component: Component): BaseObject {\n        if (component.object === null) {\n            let componentArray = this.components[component.type] || [];\n            if (componentArray.indexOf(component) < 0) {\n                const ev = new EvtComponentBeforeAttach(this);\n                component.trigger(ev);\n                ev.object = null;\n                if (ev.allow) {\n                    componentArray.push(component);\n                    component.object = this;\n                    component.trigger(new EvtComponentAttached());\n                }\n            }\n            this.components[component.type] = componentArray;\n        }\n        return this;\n    }\n    removeComponent(component: Component): BaseObject {\n        if (component.object === this) {\n            let index = this.components[component.type].indexOf(component);\n            this.removeComponentByIndex(component.type, index);\n        }\n        return this;\n    }\n    removeComponentByIndex(type: string, index: number): BaseObject {\n        const components = this.components[type];\n        if (components && index >= 0 && index < components.length) {\n            const ev = new EvtComponentBeforeDetach();\n            components[index].trigger(ev);\n            if (ev.allow) {\n                components[index].trigger(new EvtComponentDetached());\n                components[index].object = null;\n                components.splice(index, 1);\n            }\n        }\n        return this;\n    }\n    removeComponentsByType(type: string): BaseObject {\n        const components = this.components[type];\n        while (components && components.length > 0) {\n            this.removeComponentByIndex(type, components.length - 1);\n        }\n        return this;\n    }\n    removeAllComponents(): BaseObject {\n        Object.keys(this.components).forEach(type => {\n            this.removeComponentsByType(type);\n        });\n        return this;\n    }\n    getComponent(type: string, index: number = 0): Component | null {\n        let componentArray = this.components[type];\n        if (componentArray === undefined || index < 0 || componentArray.length <= index) {\n            return null;\n        }\n        return componentArray[index];\n    }\n    getComponents(type: string): Component[] {\n        return this.components[type];\n    }\n    triggerEx(evt: BaseEvent): void {\n        super.trigger(evt);\n        for (const c in this.components) {\n            if (this.components.hasOwnProperty(c)) {\n                this.components[c].forEach((comp: Component) => {\n                    comp.trigger(evt);\n                });\n            }\n        }\n    }\n    post(evt: BaseEvent): void {\n        App.postEvent(this, evt);\n    }\n}\n\nexport class SceneObject extends BaseObject {\n    private _view: SceneView;\n    private _parent: SceneObject | null;\n    private _z: number;\n    private _visible: boolean;\n    private _children: SceneObject[];\n    private _localTransform: Matrix2d;\n    private _worldTranslation: { x: number; y: number } | null;\n    private _worldRotation: number | null;\n    private _worldScale: { x: number; y: number } | null;\n    private _anchorPoint: { x: number; y: number };\n    constructor(parent: SceneObject = null) {\n        super();\n        this._view = null;\n        this._parent = null;\n        this._z = 0;\n        this._visible = true;\n        this._children = [];\n        this._localTransform = new Matrix2d();\n        this._worldTranslation = null;\n        this._worldRotation = null;\n        this._worldScale = null;\n        this._anchorPoint = { x: 0, y: 0 };\n        if (parent) {\n            parent.addChild(this);\n        }\n        this.on(EvtCull.type, (evt: EvtCull) => {\n            evt.addObject(this, this.z, this.worldTransform);\n        });\n        this.on(EvtHitTest.type, (evt: EvtHitTest) => {\n            const shape = this.boundingShape;\n            evt.result = shape ? IntersectionTestShapePoint(shape, { x: evt.x, y: evt.y }) : false;\n        });\n        this.on(EvtGetProp.type, (ev: EvtGetProp) => {\n            switch (ev.propName) {\n                case 'z':\n                    ev.propValue = this.z;\n                    ev.eat();\n                    break;\n                case 'visible':\n                    ev.propValue = this.visible;\n                    ev.eat();\n                    break;\n                case 'transform':\n                    ev.propValue = this.localTransform;\n                    ev.eat();\n                    break;\n                case 'translation':\n                    let t = this.translation;\n                    ev.propValue = [t.x, t.y];\n                    ev.eat();\n                    break;\n                case 'scale':\n                    let s = this.scale;\n                    ev.propValue = [t.x, t.y];\n                    ev.eat();\n                    break;\n                case 'rotation':\n                    ev.propValue = this.rotation;\n                    ev.eat();\n                    break;\n                case 'anchorPoint':\n                    ev.propValue = this.anchorPoint;\n                    ev.eat();\n                    break;\n                default:\n                    break;\n            }\n        });\n        this.on(EvtSetProp.type, (ev: EvtSetProp) => {\n            switch (ev.propName) {\n                case 'z':\n                    this.z = ev.propValue as number;\n                    ev.eat();\n                    break;\n                case 'visible':\n                    this.visible = ev.propValue as boolean;\n                    ev.eat();\n                    break;\n                case 'transform':\n                    this.localTransform = ev.propValue as Matrix2d;\n                    ev.eat();\n                    break;\n                case 'translation':\n                    let t = ev.propValue as number[];\n                    this.translation = { x: Math.round(t[0]), y: Math.round(t[1]) };\n                    break;\n                case 'scale':\n                    let s = ev.propValue as number[];\n                    this.scale = { x: s[0], y: s[1] };\n                    break;\n                case 'rotation':\n                    this.rotation = ev.propValue as number;\n                    break;\n                case 'anchorPoint':\n                    this.anchorPoint = ev.propValue;\n                    break;\n                default:\n                    break;\n            }\n        });\n    }\n    get boundingShape() {\n        const ev = new EvtGetBoundingShape();\n        this.triggerEx(ev);\n        return ev.shape || null;\n    }\n    get view() {\n        return this._view;\n    }\n    set view(v: SceneView) {\n        this._view = v;\n    }\n    get parent() {\n        return this._parent;\n    }\n    get z() {\n        return this._z;\n    }\n    setZ(value: number) {\n        this._z = value;\n    }\n    set z(value: number) {\n        this.setZ(value);\n    }\n    get visible() {\n        return this._visible;\n    }\n    setVisible(value: boolean) {\n        this._visible = value;\n    }\n    set visible(value: boolean) {\n        this.setVisible(value);\n    }\n    get localTransform() {\n        return this._localTransform;\n    }\n    setLocalTransform(t: Matrix2d) {\n        this._localTransform = t;\n    }\n    set localTransform(t: Matrix2d) {\n        this.setLocalTransform(t);\n    }\n    get translation(): { x: number; y: number } {\n        return this.localTransform.getTranslationPart();\n    }\n    setTranslation(t: { x: number; y: number }) {\n        this.localTransform.setTranslationPart(t);\n    }\n    set translation(t: { x: number; y: number }) {\n        this.setTranslation(t);\n    }\n    get scale(): { x: number; y: number } {\n        return this.localTransform.getScalePart();\n    }\n    setScale(s: { x: number; y: number }) {\n        this.localTransform.setScalePart(s);\n    }\n    set scale(s: { x: number; y: number }) {\n        this.setScale(s);\n    }\n    get rotation(): number {\n        return this.localTransform.getRotationPart();\n    }\n    setRotation(r: number) {\n        this.localTransform.setRotationPart(r);\n    }\n    set rotation(r: number) {\n        this.setRotation(r);\n    }\n    get worldTransform(): Matrix2d {\n        let t = this.parent ? Matrix2d.transform(this.parent.worldTransform, this.localTransform) : this.localTransform;\n        if (this._worldTranslation !== null) {\n            t.setTranslationPart(this._worldTranslation);\n        }\n        if (this._worldRotation !== null) {\n            t.setRotationPart(this._worldRotation);\n        }\n        if (this._worldScale !== null) {\n            t.setScalePart(this._worldScale);\n        }\n        return t;\n    }\n    get worldTranslation(): { x: number; y: number } | null {\n        return this._worldTranslation;\n    }\n    setWorldTranslation(value: { x: number; y: number } | null) {\n        this._worldTranslation = value === null ? null : { x: Math.round(value.x), y: Math.round(value.y) };\n    }\n    set worldTranslation(value: { x: number; y: number } | null) {\n        this.setWorldTranslation(value);\n    }\n    get worldRotation(): number | null {\n        return this._worldRotation;\n    }\n    setWorldRotation(value: number | null) {\n        this._worldRotation = value;\n    }\n    set worldRotation(value: number | null) {\n        this.setWorldRotation(value);\n    }\n    get worldScale(): { x: number; y: number } | null {\n        return this._worldScale;\n    }\n    setWorldScale(value: { x: number; y: number } | null) {\n        this._worldScale = value;\n    }\n    set worldScale(value: { x: number; y: number } | null) {\n        this.setWorldScale(value);\n    }\n    get anchorPoint() {\n        return this._anchorPoint;\n    }\n    setAnchorPoint(pt: { x: number; y: number }) {\n        this._anchorPoint = pt;\n    }\n    set anchorPoint(pt) {\n        this.setAnchorPoint(pt);\n    }\n    get numChildren(): number {\n        return this._children.length;\n    }\n    collapseTransform(): void {\n        const wt = this.worldTransform;\n        this.worldTranslation = null;\n        this.worldRotation = null;\n        this.worldScale = null;\n        if (this.parent) {\n            this.localTransform = Matrix2d.invert(this.parent.worldTransform).transform(wt);\n        } else {\n            this.localTransform = wt;\n        }\n        this.localTransform.e = Math.round(this.localTransform.e);\n        this.localTransform.f = Math.round(this.localTransform.f);\n    }\n    getLocalPoint(x: number, y: number): { x: number; y: number } {\n        return Matrix2d.invert(this.worldTransform).transformPoint({ x: x, y: y });\n    }\n    childAt(index: number): SceneObject {\n        return this._children[index];\n    }\n    forEachChild(callback: (child: SceneObject, index: number) => void) {\n        this._children.forEach(callback);\n    }\n    addChild(child: SceneObject): void {\n        if (child._parent === null) {\n            child._parent = this;\n            child._view = this._view;\n            this._children.push(child);\n        }\n    }\n    removeChild(child: SceneObject): void {\n        if (child._parent === this) {\n            let index = this._children.indexOf(child);\n            this.removeChildAt(index);\n        }\n    }\n    removeChildAt(index: number): void {\n        if (index >= 0 && index < this._children.length) {\n            let child = this._children[index];\n            this._children.splice(index, 1);\n            child._parent = null;\n            child._view = null;\n        }\n    }\n    removeChildren(): void {\n        while (this._children.length > 0) {\n            this.removeChildAt(0);\n        }\n    }\n    unrefChildren(): void {\n        while (this._children.length > 0) {\n            this._children[0].unrefChildren();\n            this.removeChildAt(0);\n        }\n    }\n    remove(): void {\n        if (this._parent) {\n            this._parent.removeChild(this);\n        }\n    }\n    triggerRecursive(evt: BaseEvent): void {\n        super.trigger(evt);\n        this.forEachChild((child: SceneObject, index: number) => {\n            child.triggerRecursive(evt);\n        });\n    }\n    triggerRecursiveEx(evt: BaseEvent): void {\n        super.triggerEx(evt);\n        this.forEachChild((child: SceneObject, index: number) => {\n            child.triggerRecursiveEx(evt);\n        });\n    }\n    setCapture(): void {\n        this._view && this._view.setCaptureObject(this);\n    }\n    releaseCapture(): void {\n        this._view && this._view.captureObject === this && this._view.setCaptureObject(null);\n    }\n    toString(): string {\n        return '<SceneObject>';\n    }\n}\n\nexport interface ISceneViewPage {\n    name: string;\n    rootNode: SceneObject;\n    bkImageUrl: string;\n    bkImageRepeat: string;\n    bkImageAttachment: string;\n    bkImageSize: string;\n    bkColor: string;\n}\n\nexport class SceneView extends BaseObject {\n    private _canvas: Canvas;\n    private _pages: { [name: string]: ISceneViewPage };\n    private _currentPage: string;\n    private _captureObject: SceneObject;\n    private _hitObjects: SceneObject[];\n    constructor(canvas: HTMLCanvasElement, doubleBuffer: boolean = false) {\n        super();\n        this._canvas = new Canvas(this, canvas, doubleBuffer);\n        this._captureObject = null;\n        this._hitObjects = [];\n        this._currentPage = null;\n        this._pages = {};\n        const rootNode = new SceneObject();\n        rootNode.view = this;\n        this.addPage({\n            name: 'page1',\n            rootNode: rootNode,\n            bkImageUrl: null,\n            bkImageRepeat: null,\n            bkImageSize: null,\n            bkImageAttachment: null,\n            bkColor: '#ffffff'\n        });\n        this.selectPage('page1');\n\n        this.on(EvtFrame.type, (ev: EvtFrame) => {\n            let updateEvent = new EvtUpdate(ev.deltaTime, ev.elapsedTime, ev.frameStamp);\n            if (this.rootNode) {\n                this.rootNode.triggerRecursiveEx(updateEvent);\n            }\n            this.canvas.clear();\n            this.triggerEx(new EvtDraw(this.canvas, 0, new Matrix2d()));\n            this.canvas.flip();\n        });\n        this.on(EvtDraw.type, (ev: EvtDraw) => {\n            if (this.rootNode) {\n                let cullEvent = new EvtCull(ev.canvas.width, ev.canvas.height);\n                this.rootNode.triggerRecursiveEx(cullEvent);\n                for (let i in cullEvent.result) {\n                    let group = cullEvent.result[i];\n                    for (let j = 0; j < group.length; j++) {\n                        ev.canvas.context.save();\n                        ev.canvas.applyTransform(group[j].transform);\n                        ev.canvas.context.translate(0.5, 0.5);\n                        group[j].object.triggerEx(new EvtDraw(ev.canvas, group[j].z, group[j].transform));\n                        ev.canvas.context.restore();\n                    }\n                }\n            }\n        });\n    }\n    forEachPage(callback: (page: ISceneViewPage) => void) {\n        if (callback) {\n            for (const name in this._pages) {\n                callback({\n                    name: name,\n                    rootNode: this._pages[name].rootNode,\n                    bkImageUrl: this._pages[name].bkImageUrl,\n                    bkImageRepeat: this._pages[name].bkImageRepeat,\n                    bkImageAttachment: this._pages[name].bkImageAttachment,\n                    bkImageSize: this._pages[name].bkImageSize,\n                    bkColor: this._pages[name].bkColor\n                });\n            }\n        }\n    }\n    addPage(page?: ISceneViewPage): string {\n        const defaultPage: ISceneViewPage = {\n            name: null,\n            rootNode: null,\n            bkImageUrl: null,\n            bkImageRepeat: 'repeat',\n            bkImageAttachment: 'scroll',\n            bkImageSize: 'auto',\n            bkColor: '#ffffff'\n        };\n        const p: ISceneViewPage = page || defaultPage;\n        const name = p.name || this.genPageName();\n        if (name in this._pages) {\n            return null;\n        }\n        this._pages[name] = {\n            name: name,\n            rootNode: p.rootNode,\n            bkImageUrl: p.bkImageUrl,\n            bkImageRepeat: p.bkImageRepeat || defaultPage.bkImageRepeat,\n            bkImageAttachment: p.bkImageAttachment || defaultPage.bkImageAttachment,\n            bkImageSize: p.bkImageSize || defaultPage.bkImageSize,\n            bkColor: p.bkColor || defaultPage.bkColor\n        };\n        return name;\n    }\n    removePage(name: string): boolean {\n        if (name in this._pages) {\n            if (name === this._currentPage) {\n                let b = false;\n                for (const n in this._pages) {\n                    if (n !== name) {\n                        this.selectPage(n);\n                        b = true;\n                    }\n                }\n                if (!b) {\n                    return false;\n                }\n            }\n            this._pages[name].rootNode.unrefChildren();\n            this._pages[name].rootNode.view = null;\n            this._pages[name].rootNode = null;\n            delete this._pages[name];\n            return true;\n        }\n        return false;\n    }\n    selectPage(name: string) {\n        const oldName = this._currentPage;\n        if (name in this._pages && name !== oldName) {\n            App.triggerEvent(null, new EvtSceneViewPageWillChange(this, oldName, name));\n            this._currentPage = name;\n            this._captureObject = null;\n            this._hitObjects.length = 0;\n            this.applyPage(this._pages[this._currentPage]);\n            App.triggerEvent(null, new EvtSceneViewPageChanged(this, oldName, name));\n        }\n    }\n    renamePage(oldName: string, newName: string) {\n        if (oldName in this._pages && newName && newName !== oldName && !(newName in this._pages)) {\n            const page = this._pages[oldName];\n            delete this._pages[oldName];\n            page.name = newName;\n            this._pages[newName] = page;\n            if (oldName === this._currentPage) {\n                this._currentPage = newName;\n            }\n        }\n    }\n    get currentPage() {\n        return this._currentPage;\n    }\n    get pageImage() {\n        return this._pages[this._currentPage].bkImageUrl;\n    }\n    set pageImage(image: string) {\n        if (image !== this._pages[this._currentPage].bkImageUrl) {\n            this._pages[this._currentPage].bkImageUrl = image;\n            this.applyPage(this._pages[this._currentPage]);\n        }\n    }\n    get pageImageRepeat() {\n        return this._pages[this._currentPage].bkImageRepeat;\n    }\n    set pageImageRepeat(value: string) {\n        const repeat = value || 'repeat';\n        if (repeat !== this._pages[this._currentPage].bkImageRepeat) {\n            this._pages[this._currentPage].bkImageRepeat = repeat;\n            this.applyPage(this._pages[this._currentPage]);\n        }\n    }\n    get pageImageAttachment() {\n        return this._pages[this._currentPage].bkImageAttachment;\n    }\n    set pageImageAttachment(value: string) {\n        const attach = value || 'scroll';\n        if (attach !== this._pages[this._currentPage].bkImageAttachment) {\n            this._pages[this._currentPage].bkImageAttachment = attach;\n            this.applyPage(this._pages[this._currentPage]);\n        }\n    }\n    get pageImageSize() {\n        return this._pages[this._currentPage].bkImageSize;\n    }\n    set pageImageSize(value: string) {\n        const size = value || 'auto';\n        if (size !== this._pages[this._currentPage].bkImageSize) {\n            this._pages[this._currentPage].bkImageSize = size;\n            this.applyPage(this._pages[this._currentPage]);\n        }\n    }\n    get pageColor() {\n        return this._pages[this._currentPage].bkColor;\n    }\n    set pageColor(color: string) {\n        if (color !== this._pages[this._currentPage].bkColor) {\n            this._pages[this._currentPage].bkColor = color;\n            this.applyPage(this._pages[this._currentPage]);\n        }\n    }\n    public updateHitObjects(x: number, y: number) {\n        const hitTestResult = this.hitTest(x, y);\n        for (let i = 0; i < this._hitObjects.length; ) {\n            if (hitTestResult.indexOf(this._hitObjects[i]) < 0) {\n                this._hitObjects[i].trigger(new EvtMouseLeave());\n                this._hitObjects.splice(i, 1);\n            } else {\n                i++;\n            }\n        }\n        for (let i = 0; i < hitTestResult.length; i++) {\n            if (this._hitObjects.indexOf(hitTestResult[i]) < 0) {\n                hitTestResult[i].trigger(new EvtMouseEnter());\n            }\n        }\n        this._hitObjects = hitTestResult;\n        this._hitObjects.push(this.rootNode);\n    }\n    get rootNode(): SceneObject {\n        let node = this._pages[this._currentPage].rootNode;\n        if (!node) {\n            node = new SceneObject();\n            node.view = this;\n            this._pages[this._currentPage].rootNode = node;\n        }\n        return node;\n    }\n    set rootNode(node: SceneObject) {\n        if (this._pages[this._currentPage].rootNode !== node) {\n            this._pages[this._currentPage].rootNode = node;\n            this._hitObjects.length = 0;\n            this._captureObject = null;\n        }\n    }\n    get canvas(): Canvas {\n        return this._canvas;\n    }\n    get captureObject(): SceneObject {\n        return this._captureObject;\n    }\n    get hitObjects(): SceneObject[] {\n        return this._hitObjects;\n    }\n    setCaptureObject(object: SceneObject): void {\n        this._captureObject = object;\n    }\n    handleMouseDown(ev: MouseEvent): void {\n        const rc = this.canvas.viewport_rect;\n        const e = new EvtMouseDown(ev.clientX - rc.x, ev.clientY - rc.y, ev.button, ev.shiftKey, ev.altKey, ev.ctrlKey, ev.metaKey);\n        if (this.isValidObject(this._captureObject)) {\n            this._captureObject.triggerEx(e);\n        } else {\n            for (let i = 0; i < this._hitObjects.length; i++) {\n                const obj = this._hitObjects[i];\n                if (this.isValidObject(obj)) {\n                    obj.triggerEx(e);\n                    if (!e.bubble) {\n                        break;\n                    }\n                }\n            }\n            if (e.bubble) {\n                this.triggerEx(e);\n            }\n        }\n    }\n    handleMouseUp(ev: MouseEvent): void {\n        const rc = this.canvas.viewport_rect;\n        const e = new EvtMouseUp(ev.clientX - rc.x, ev.clientY - rc.y, ev.button, ev.shiftKey, ev.altKey, ev.ctrlKey, ev.metaKey);\n        if (this.isValidObject(this._captureObject)) {\n            this._captureObject.triggerEx(e);\n        } else {\n            for (let i = 0; i < this._hitObjects.length; i++) {\n                const obj = this._hitObjects[i];\n                if (this.isValidObject(obj)) {\n                    obj.triggerEx(e);\n                    if (!e.bubble) {\n                        break;\n                    }\n                }\n            }\n            if (e.bubble) {\n                this.triggerEx(e);\n            }\n        }\n    }\n    handleMouseMove(ev: MouseEvent): void {\n        const rc = this.canvas.viewport_rect;\n        const e = new EvtMouseMove(ev.clientX - rc.x, ev.clientY - rc.y, ev.button, ev.shiftKey, ev.altKey, ev.ctrlKey, ev.metaKey);\n        if (this.isValidObject(this._captureObject)) {\n            this._captureObject.triggerEx(e);\n        } else {\n            for (let i = 0; i < this._hitObjects.length; i++) {\n                const obj = this._hitObjects[i];\n                if (this.isValidObject(obj)) {\n                    obj.triggerEx(e);\n                    if (!e.bubble) {\n                        break;\n                    }\n                }\n            }\n            if (e.bubble) {\n                this.triggerEx(e);\n            }\n        }\n    }\n    handleClick(ev: MouseEvent): void {\n        const rc = this.canvas.viewport_rect;\n        const e = new EvtClick(ev.clientX - rc.x, ev.clientY - rc.y, ev.button, ev.shiftKey, ev.altKey, ev.ctrlKey, ev.metaKey);\n        for (let i = 0; i < this._hitObjects.length; i++) {\n            const obj = this._hitObjects[i];\n            if (this.isValidObject(obj)) {\n                obj.triggerEx(e);\n                if (!e.bubble) {\n                    break;\n                }\n            }\n        }\n        if (e.bubble) {\n            this.triggerEx(e);\n        }\n    }\n    handleDblClick(ev: MouseEvent): void {\n        const rc = this.canvas.viewport_rect;\n        const e = new EvtDblClick(ev.clientX - rc.x, ev.clientY - rc.y, ev.button, ev.shiftKey, ev.altKey, ev.ctrlKey, ev.metaKey);\n        for (let i = 0; i < this._hitObjects.length; i++) {\n            const obj = this._hitObjects[i];\n            if (this.isValidObject(obj)) {\n                obj.triggerEx(e);\n                if (!e.bubble) {\n                    break;\n                }\n            }\n        }\n        if (e.bubble) {\n            this.triggerEx(e);\n        }\n    }\n    setFocus(): void {\n        App.setFocusView(this);\n    }\n    hitTest(x: number, y: number): HitTestResult {\n        function hitTest_r(object: SceneObject, result: HitTestResult) {\n            const pos = Matrix2d.invert(object.worldTransform).transformPoint({ x: x, y: y });\n            const e = new EvtHitTest(pos.x, pos.y);\n            object.triggerEx(e);\n            if (e.result) {\n                result.push(object);\n            }\n            object.forEachChild((child: SceneObject, index: number) => {\n                hitTest_r(child, result);\n            });\n        }\n        const hitTestResult: HitTestResult = [];\n        if (this.rootNode) {\n            hitTest_r(this.rootNode, hitTestResult);\n            hitTestResult.sort(\n                (a: SceneObject, b: SceneObject): number => {\n                    return b.z - a.z;\n                }\n            );\n        }\n        return hitTestResult;\n    }\n    private isValidObject(object: SceneObject) {\n        return object && object.view === this;\n    }\n    private genPageName(): string {\n        let n = 1;\n        while (true) {\n            const name = `page${n++}`;\n            if (!(name in this._pages)) {\n                return name;\n            }\n        }\n    }\n    private applyPage(page: ISceneViewPage) {\n        const color = page.bkColor || '';\n        const url = (page.bkImageUrl && `url(${page.bkImageUrl})`) || '';\n        const bkrepeat = page.bkImageRepeat || 'repeat';\n        const bkattach = page.bkImageAttachment || 'scroll';\n        const bkpos = '0% 0%';\n        const bksize = page.bkImageSize || 'auto';\n        this._canvas.canvas.style.background = `${color} ${url} ${bkrepeat} ${bkattach} ${bkpos} / ${bksize}`;\n    }\n}\n\nexport function ResizeSensor(element: HTMLElement, callback: Function) {\n    let zIndex = parseInt(window.getComputedStyle(element).zIndex, 10);\n    if (isNaN(zIndex)) {\n        zIndex = 0;\n    }\n    zIndex--;\n\n    let expand = document.createElement('div');\n    expand.style.position = 'absolute';\n    expand.style.left = '0px';\n    expand.style.top = '0px';\n    expand.style.right = '0px';\n    expand.style.bottom = '0px';\n    expand.style.overflow = 'hidden';\n    expand.style.zIndex = String(zIndex);\n    expand.style.visibility = 'hidden';\n\n    let expandChild = document.createElement('div');\n    expandChild.style.position = 'absolute';\n    expandChild.style.left = '0px';\n    expandChild.style.top = '0px';\n    expandChild.style.width = '10000000px';\n    expandChild.style.height = '10000000px';\n    expand.appendChild(expandChild);\n\n    let shrink = document.createElement('div');\n    shrink.style.position = 'absolute';\n    shrink.style.left = '0px';\n    shrink.style.top = '0px';\n    shrink.style.right = '0px';\n    shrink.style.bottom = '0px';\n    shrink.style.overflow = 'hidden';\n    shrink.style.zIndex = String(zIndex);\n    shrink.style.visibility = 'hidden';\n\n    let shrinkChild = document.createElement('div');\n    shrinkChild.style.position = 'absolute';\n    shrinkChild.style.left = '0px';\n    shrinkChild.style.top = '0px';\n    shrinkChild.style.width = '200%';\n    shrinkChild.style.height = '200%';\n    shrink.appendChild(shrinkChild);\n\n    element.appendChild(expand);\n    element.appendChild(shrink);\n\n    function setScroll() {\n        expand.scrollLeft = 10000000;\n        expand.scrollTop = 10000000;\n\n        shrink.scrollLeft = 10000000;\n        shrink.scrollTop = 10000000;\n    }\n    setScroll();\n\n    let size = element.getBoundingClientRect();\n\n    let currentWidth = size.width;\n    let currentHeight = size.height;\n\n    let onScroll = function() {\n        let size = element.getBoundingClientRect();\n\n        let newWidth = size.width;\n        let newHeight = size.height;\n\n        if (newWidth !== currentWidth || newHeight !== currentHeight) {\n            currentWidth = newWidth;\n            currentHeight = newHeight;\n\n            callback();\n        }\n\n        setScroll();\n    };\n\n    expand.addEventListener('scroll', onScroll);\n    shrink.addEventListener('scroll', onScroll);\n}\n\nexport class Canvas extends BaseObject {\n    private readonly _canvas: HTMLCanvasElement;\n    private _view: SceneView;\n    private _buffer: HTMLCanvasElement;\n    private _screenCtx: CanvasRenderingContext2D;\n    private _offscreenCtx: CanvasRenderingContext2D;\n    private _width: number;\n    private _height: number;\n    private _doubleBuffer: boolean;\n    constructor(view: SceneView, canvas: HTMLCanvasElement, doubleBuffer: boolean = false) {\n        super();\n        this._view = view;\n        this._canvas = canvas;\n        if (this._canvas) {\n            this.adjustCanvasSize(this._canvas);\n            ResizeSensor(this._canvas.parentElement, () => {\n                this.adjustCanvasSize(this._canvas);\n            });\n        }\n        this._mouseOver = false;\n        this._doubleBuffer = doubleBuffer;\n    }\n    get canvas(): HTMLCanvasElement {\n        return this._canvas;\n    }\n    get width(): number {\n        return this._width;\n    }\n    get height(): number {\n        return this._height;\n    }\n    get context(): CanvasRenderingContext2D {\n        return this._doubleBuffer ? this._offscreenCtx : this._screenCtx;\n    }\n    get viewport_rect(): { x: number; y: number; w: number; h: number } {\n        const rc = this._canvas.getBoundingClientRect();\n        const x = rc.left - document.documentElement.clientLeft;\n        const y = rc.top - document.documentElement.clientTop;\n        const w = rc.right - rc.left;\n        const h = rc.bottom - rc.top;\n        return { x: x, y: y, w: w, h: h };\n    }\n    clear(rect?: { x: number; y: number; w: number; h: number }): void {\n        const x = rect ? rect.x : 0;\n        const y = rect ? rect.y : 0;\n        const w = rect ? rect.w : this._width;\n        const h = rect ? rect.h : this._height;\n        this.context.setTransform(1, 0, 0, 1, 0, 0);\n        this.context.clearRect(x, y, w, h);\n        if (this._doubleBuffer) {\n            this._screenCtx.clearRect(x, y, w, h);\n        }\n    }\n    applyTransform(transform: Matrix2d): void {\n        this.context.setTransform(transform.a, transform.b, transform.c, transform.d, Math.round(transform.e), Math.round(transform.f));\n    }\n    flip(): void {\n        if (this._doubleBuffer) {\n            this._screenCtx.drawImage(this._buffer, 0, 0);\n        }\n    }\n    private adjustCanvasSize(canvas: HTMLCanvasElement) {\n        const computedStyle = window.getComputedStyle(canvas.parentElement);\n        this._width = canvas.parentElement.clientWidth - parseFloat(computedStyle.paddingLeft) - parseFloat(computedStyle.paddingRight);\n        this._height = canvas.parentElement.clientHeight - parseFloat(computedStyle.paddingTop) - parseFloat(computedStyle.paddingBottom);\n        this._canvas.width = this._width;\n        this._canvas.height = this._height;\n        this._screenCtx = this._canvas.getContext('2d');\n        this._buffer = document.createElement('canvas');\n        this._buffer.width = this._width;\n        this._buffer.height = this._height;\n        this._offscreenCtx = this._buffer.getContext('2d');\n        App.triggerEvent(null, new EvtCanvasResize(this._view));\n    }\n}\n","import { IPoint2d } from './point';\n\nexport enum SplineType {\n    STEP = 1,\n    LINEAR = 2,\n    POLY = 3\n}\n\nexport class CurveEvaluter {\n    cp: IPoint2d[];\n    clamp: boolean;\n    constructor(cp: IPoint2d[], clamp: boolean = false) {\n        this.cp = cp;\n        this.clamp = clamp;\n    }\n    eval(x: number): number {\n        return 0;\n    }\n    evalFirst(): number {\n        return this.cp.length > 0 ? this.cp[0].y : 0;\n    }\n    evalLast(): number {\n        return this.cp.length > 0 ? this.cp[this.cp.length - 1].y : 0;\n    }\n}\n\nexport class StepEvaluter extends CurveEvaluter {\n    h: number[];\n    constructor(cp: IPoint2d[], clamp: boolean = false) {\n        super(cp, clamp);\n        this.h = new Array(cp.length - 1);\n        this.compute();\n    }\n    compute(): void {\n        for (let i = 0; i < this.cp.length - 1; ++i) {\n            this.h[i] = this.cp[i + 1].x - this.cp[i].x;\n        }\n    }\n    getSegment(x: number): number {\n        let i;\n        for (i = 0; i < this.cp.length - 1; i++) {\n            if (x < this.cp[i + 1].x) {\n                break;\n            }\n        }\n        return i;\n    }\n    eval(x: number): number {\n        if (this.clamp) {\n            if (x < 0) {\n                return this.cp[0].y;\n            }\n            if (x > this.cp[this.cp.length - 1].x) {\n                return this.cp[this.cp.length - 1].y;\n            }\n        }\n        let seg = this.getSegment(x);\n        return this.cp[seg].y;\n    }\n}\n\nexport class CoLinearEvaluter extends CurveEvaluter {\n    h: number[];\n    constructor(cp: IPoint2d[], clamp: boolean = false) {\n        super(cp, clamp);\n        this.h = new Array(cp.length - 1);\n        this.cp = cp;\n        this.compute();\n    }\n    compute(): void {\n        for (let i = 0; i < this.cp.length - 1; ++i) {\n            this.h[i] = this.cp[i + 1].x - this.cp[i].x;\n        }\n    }\n    getSegment(x: number): number {\n        let i;\n        for (i = 0; i < this.cp.length - 1; i++) {\n            if (x < this.cp[i + 1].x) {\n                break;\n            }\n        }\n        if (i === this.cp.length - 1) {\n            i--;\n        }\n        return i;\n    }\n    eval(x: number): number {\n        if (this.clamp) {\n            if (x < 0) {\n                return this.cp[0].y;\n            }\n            if (x > this.cp[this.cp.length - 1].x) {\n                return this.cp[this.cp.length - 1].y;\n            }\n        }\n        let seg = this.getSegment(x);\n        let t = x - this.cp[seg].x;\n        return this.cp[seg].y + ((this.cp[seg + 1].y - this.cp[seg].y) * t) / this.h[seg];\n    }\n}\n\nexport class PolynomialsEvaluter extends CurveEvaluter {\n    a: number[];\n    h: number[];\n    constructor(cp: IPoint2d[], clamp: boolean = false) {\n        super(cp, clamp);\n        this.a = new Array(cp.length);\n        this.h = new Array(cp.length);\n        this.cp = cp;\n        this.compute();\n    }\n    solveTridiag(sub: number[], diag: number[], sup: number[]) {\n        let n = this.cp.length - 2;\n        for (let i = 2; i <= n; i++) {\n            sub[i] /= diag[i - 1];\n            diag[i] -= sub[i] * sup[i - 1];\n            this.a[i] -= this.a[i - 1] * sub[i];\n        }\n        this.a[n] /= diag[n];\n        for (let i = n - 1; i >= 1; --i) {\n            this.a[i] = (this.a[i] - this.a[i + 1] * sup[i]) / diag[i];\n        }\n    }\n    compute(): void {\n        let nk = this.cp.length;\n        let sub = new Array(nk - 1);\n        let diag = new Array(nk - 1);\n        let sup = new Array(nk - 1);\n        this.a[0] = 0;\n        this.a[nk - 1] = 0;\n        for (let i = 1; i < nk; ++i) {\n            this.h[i] = this.cp[i].x - this.cp[i - 1].x;\n        }\n        for (let i = 1; i < nk - 1; ++i) {\n            diag[i] = (this.h[i] + this.h[i + 1]) / 3;\n            sup[i] = this.h[i + 1] / 6;\n            sub[i] = this.h[i] / 6;\n            this.a[i] = (this.cp[i + 1].y - this.cp[i].y) / this.h[i + 1] - (this.cp[i].y - this.cp[i - 1].y) / this.h[i];\n        }\n        this.solveTridiag(sub, diag, sup);\n    }\n    getSegment(x: number): number {\n        let i;\n        for (i = 0; i < this.cp.length - 1; i++) {\n            if (x < this.cp[i + 1].x) {\n                break;\n            }\n        }\n        if (i === this.cp.length - 1) {\n            i--;\n        }\n        return i;\n    }\n    eval(x: number): number {\n        if (this.clamp) {\n            if (x < 0) {\n                return this.cp[0].y;\n            }\n            if (x > this.cp[this.cp.length - 1].x) {\n                return this.cp[this.cp.length - 1].y;\n            }\n        }\n        let seg = this.getSegment(x) + 1;\n        let t1 = x - this.cp[seg - 1].x;\n        let t2 = this.h[seg] - t1;\n        return (\n            (((-this.a[seg - 1] / 6.0) * (t2 + this.h[seg]) * t1 + this.cp[seg - 1].y) * t2 + ((-this.a[seg] / 6.0) * (t1 + this.h[seg]) * t2 + this.cp[seg].y) * t1) / this.h[seg]\n        );\n    }\n}\n\nexport class Spline {\n    private _evalutors: CurveEvaluter[];\n    private _array: boolean;\n    constructor(type: SplineType, cp: IPoint2d[] | { x: number; y: number[] }[], clamp: boolean = false) {\n        this._evalutors = [];\n        this._array = false;\n        if (cp.length > 0) {\n            if (typeof cp[0].y === 'number') {\n                this.initNonArray(type, cp as IPoint2d[], clamp);\n            } else {\n                this.initArray(type, cp as { x: number; y: number[] }[], clamp);\n            }\n        }\n    }\n    eval(x: number): number | number[] {\n        if (this._evalutors.length > 0) {\n            if (this._array) {\n                let result: number[] = [];\n                this._evalutors.forEach((evalutor: CurveEvaluter) => {\n                    result.push(evalutor.eval(x));\n                });\n                return result;\n            } else {\n                return this._evalutors[0].eval(x);\n            }\n        } else {\n            return 0;\n        }\n    }\n    evalFirst(): number | number[] {\n        if (this._evalutors.length > 0) {\n            if (this._array) {\n                let result: number[] = [];\n                this._evalutors.forEach((evalutor: CurveEvaluter) => {\n                    result.push(evalutor.evalFirst());\n                });\n                return result;\n            } else {\n                return this._evalutors[0].evalFirst();\n            }\n        } else {\n            return 0;\n        }\n    }\n    evalLast(): number | number[] {\n        if (this._evalutors.length > 0) {\n            if (this._array) {\n                let result: number[] = [];\n                this._evalutors.forEach((evalutor: CurveEvaluter) => {\n                    result.push(evalutor.evalLast());\n                });\n                return result;\n            } else {\n                return this._evalutors[0].evalLast();\n            }\n        } else {\n            return 0;\n        }\n    }\n    private initArray(type: SplineType, cp: { x: number; y: number[] }[], clamp: boolean) {\n        const numElements = cp[0].y.length;\n        if (numElements > 0) {\n            for (let i = 0; i < numElements; i++) {\n                let t = [];\n                for (let j = 0; j < cp.length; j++) {\n                    let val = cp[j].y.length > i ? cp[j].y[i] : 0;\n                    t.push({ x: cp[j].x, y: val });\n                }\n                switch (type) {\n                    case SplineType.STEP:\n                        this._evalutors.push(new StepEvaluter(t, clamp));\n                        break;\n                    case SplineType.LINEAR:\n                        this._evalutors.push(new CoLinearEvaluter(t, clamp));\n                        break;\n                    case SplineType.POLY:\n                    default:\n                        this._evalutors.push(new PolynomialsEvaluter(t, clamp));\n                        break;\n                }\n            }\n            this._array = true;\n        }\n    }\n    private initNonArray(type: SplineType, cp: IPoint2d[], clamp: boolean) {\n        switch (type) {\n            case SplineType.STEP:\n                this._evalutors.push(new StepEvaluter(cp, clamp));\n                break;\n            case SplineType.LINEAR:\n                this._evalutors.push(new CoLinearEvaluter(cp, clamp));\n                break;\n            case SplineType.POLY:\n            default:\n                this._evalutors.push(new PolynomialsEvaluter(cp, clamp));\n                break;\n        }\n        this._array = false;\n    }\n}\n","export enum KeyCode {\n    kBackspace = 8,\n    kTab = 9,\n    kClear = 12,\n    kEnter = 13,\n    kShift = 16,\n    kControl = 17,\n    kAlt = 18,\n    kPause = 19,\n    kCapsLock = 20,\n    kEscape = 27,\n    kSpace = 32,\n    kPageUp = 33,\n    kPageDown = 34,\n    kEnd = 35,\n    kHome = 36,\n    kLeft = 37,\n    kUp = 38,\n    kRight = 39,\n    kDown = 40,\n    kSelect = 41,\n    kPrint = 42,\n    kExecute = 43,\n    kInsert = 45,\n    kDelete = 46,\n    kHelp = 47,\n    k0 = 48,\n    k1 = 49,\n    k2 = 50,\n    k3 = 51,\n    k4 = 52,\n    k5 = 53,\n    k6 = 54,\n    k7 = 55,\n    k8 = 56,\n    k9 = 57,\n    kA = 65,\n    kB = 66,\n    kC = 67,\n    kD = 68,\n    kE = 69,\n    kF = 70,\n    kG = 71,\n    kH = 72,\n    kI = 73,\n    kJ = 74,\n    kK = 75,\n    kL = 76,\n    kM = 77,\n    kN = 78,\n    kO = 79,\n    kP = 80,\n    kQ = 81,\n    kR = 82,\n    kS = 83,\n    kT = 84,\n    kU = 85,\n    kV = 86,\n    kW = 87,\n    kX = 88,\n    kY = 89,\n    kZ = 90,\n    kLeftMeta = 91,\n    kRightMeta = 92,\n    kMenu = 93,\n    kKP0 = 96,\n    kKP1 = 97,\n    kKP2 = 98,\n    kKP3 = 99,\n    kKP4 = 100,\n    kKP5 = 101,\n    kKP6 = 102,\n    kKP7 = 103,\n    kKP8 = 104,\n    kKP9 = 105,\n    kKPMul = 106,\n    kKPAdd = 107,\n    kKPSep = 108,\n    kKPSub = 109,\n    kKPDec = 110,\n    kKPDiv = 111,\n    kF1 = 112,\n    kF2 = 113,\n    kF3 = 114,\n    kF4 = 115,\n    kF5 = 116,\n    kF6 = 117,\n    kF7 = 118,\n    kF8 = 119,\n    kF9 = 120,\n    kF10 = 121,\n    kF11 = 122,\n    kF12 = 123,\n    kNumLock = 144,\n    kScrollLock = 145,\n    kAdd = 187,\n    kComma = 188,\n    kMinus = 189,\n    kPeriod = 190,\n    kApostrophe = 192,\n    kLeftBrace = 219,\n    kRightBrace = 221,\n    kBackSlash = 220,\n    kQuot = 222,\n    kSemicolon = 186,\n    kSlash = 191\n}\n","import {\n    Component,\n    SceneObject,\n    App,\n    EvtCull,\n    EvtDragging,\n    EvtDragEnd,\n    EvtDraw,\n    EvtUpdate,\n    EvtGetProp,\n    EvtSetProp,\n    EvtMouseMove,\n    EvtMouseDown,\n    EvtMouseUp,\n    EvtDragBegin,\n    EvtDragDrop,\n    EvtDragOver,\n    EvtComponentBeforeAttach,\n    EvtGetBoundingShape\n} from './core';\nimport { Spline, SplineType } from './curve';\nimport { BoundingBox } from './boundingbox';\nimport { IPoint2d } from './point';\n\nexport class CoKeyframeAnimation extends Component {\n    static readonly type = 'KeyframeAnimation';\n    private _tracks: { [name: string]: { evalutor: Spline; value: any } };\n    private _exclusive: boolean;\n    private _repeat: number;\n    private _duration: number;\n    private _startTime: number;\n    private _delay: number;\n    private _round: number;\n    private _autoRemove: boolean;\n    constructor(options?: {\n        delay?: number;\n        repeat?: number;\n        exclusive?: boolean;\n        autoRemove?: boolean;\n        tracks?: {\n            [name: string]: {\n                cp: IPoint2d[] | { x: number; y: number[] }[];\n                type?: SplineType;\n                clamp?: boolean;\n            };\n        };\n    }) {\n        super(CoKeyframeAnimation.type);\n        this._tracks = {};\n        this._duration = 0;\n        this._startTime = 0;\n        this._round = 0;\n\n        const opt = options || {};\n        this._delay = opt.delay === undefined ? 0 : opt.delay;\n        this._repeat = opt.repeat === undefined ? 0 : opt.repeat;\n        this._autoRemove = opt.autoRemove === undefined ? true : opt.autoRemove;\n        this._exclusive = !!opt.exclusive;\n        if (opt.tracks) {\n            for (const trackName in opt.tracks) {\n                if (opt.tracks.hasOwnProperty(trackName)) {\n                    const trackinfo = opt.tracks[trackName];\n                    const type = trackinfo.type === undefined ? SplineType.POLY : trackinfo.type;\n                    const clamp = trackinfo.clamp === undefined ? true : trackinfo.clamp;\n                    this.setTrack(trackName, type, clamp, trackinfo.cp);\n                }\n            }\n        }\n        this.on(EvtComponentBeforeAttach.type, (ev: EvtComponentBeforeAttach) => {\n            if (this._exclusive) {\n                ev.object.removeComponentsByType(this.type);\n            }\n        });\n        this.on(EvtUpdate.type, (e: EvtUpdate) => {\n            const timeNow = e.elapsedTime;\n            if (this._startTime === 0) {\n                this._startTime = timeNow;\n            }\n            if (this._startTime + this._delay > timeNow) {\n                return;\n            }\n            let t = timeNow - this._startTime - this._delay;\n            for (const track in this._tracks) {\n                if (this._tracks.hasOwnProperty(track)) {\n                    this._tracks[track].value = this._tracks[track].evalutor.eval(t);\n                }\n            }\n            if (this.object) {\n                for (const prop in this._tracks) {\n                    if (this._tracks.hasOwnProperty(prop)) {\n                        this.object.triggerEx(new EvtSetProp(prop, this._tracks[prop].value));\n                    }\n                }\n            }\n            if (t >= this._duration) {\n                this._round++;\n                if (this._repeat === 0 || this._round < this._repeat) {\n                    this._startTime = timeNow + t - this._duration;\n                } else if (this._autoRemove) {\n                    this.object.removeComponent(this);\n                }\n            }\n        });\n    }\n    get repeat(): number {\n        return this._repeat;\n    }\n    set repeat(val: number) {\n        this._repeat = val;\n    }\n    get autoRemove(): boolean {\n        return this._autoRemove;\n    }\n    set autoRemove(val: boolean) {\n        this._autoRemove = val;\n    }\n    get delay(): number {\n        return this._delay;\n    }\n    set delay(delay: number) {\n        this._delay = delay;\n    }\n    setTrack(name: string, type: SplineType, clamp: boolean, keyFrames: IPoint2d[] | { x: number; y: number[] }[]) {\n        if (keyFrames.length > 0) {\n            if (keyFrames[keyFrames.length - 1].x > this._duration) {\n                this._duration = keyFrames[keyFrames.length - 1].x;\n            }\n            this._tracks[name] = { evalutor: new Spline(type, keyFrames, clamp), value: null };\n        }\n    }\n    finish(): void {\n        for (let track in this._tracks) {\n            this._tracks[track].value = this._tracks[track].evalutor.evalLast();\n        }\n        if (this.object) {\n            for (let prop in this._tracks) {\n                this.object.triggerEx(new EvtSetProp(prop, this._tracks[prop].value));\n            }\n        }\n        this._round++;\n        if (this._repeat === 0 || this._round < this._repeat) {\n            this._startTime = App.elapsedTime;\n        } else if (this._autoRemove) {\n            this.object.removeComponent(this);\n        }\n    }\n}\n\nexport class CoDraggable extends Component {\n    static readonly type = 'Draggable';\n    private _dragging: boolean;\n    private _draggingData: any;\n    constructor() {\n        super(CoDraggable.type);\n        this._dragging = false;\n        this._draggingData = null;\n        this.on(EvtMouseDown.type, (e: EvtMouseDown) => {\n            const obj = this.object as SceneObject;\n            obj.setCapture();\n            this._dragging = true;\n            const dragBeginEvent = new EvtDragBegin(e.x, e.y, e.button, e.shiftDown, e.altDown, e.ctrlDown, e.metaDown);\n            obj.triggerEx(dragBeginEvent);\n            this._draggingData = dragBeginEvent.data;\n            e.cancelBubble();\n        });\n        this.on(EvtMouseUp.type, (e: EvtMouseUp) => {\n            const obj = this.object as SceneObject;\n            obj.releaseCapture();\n\n            if (this._dragging) {\n                const dragendEvent = new EvtDragEnd(e.x, e.y, e.button, e.shiftDown, e.altDown, e.ctrlDown, e.metaDown, this._draggingData);\n                obj.triggerEx(dragendEvent);\n\n                this._dragging = false;\n                obj.view.updateHitObjects(e.x, e.y);\n                let dragDropEvent = new EvtDragDrop(e.x, e.y, e.button, e.shiftDown, e.altDown, e.ctrlDown, e.metaDown, obj, this._draggingData);\n                for (let i = 0; i < obj.view.hitObjects.length; i++) {\n                    const hitObj = obj.view.hitObjects[i];\n                    if (hitObj !== obj && hitObj.z <= obj.z) {\n                        hitObj.triggerEx(dragDropEvent);\n                        if (!dragDropEvent.bubble) {\n                            break;\n                        }\n                    }\n                }\n                if (dragDropEvent.bubble) {\n                    obj.view.triggerEx(dragDropEvent);\n                }\n                this._draggingData = null;\n                e.cancelBubble();\n            }\n        });\n        this.on(EvtMouseMove.type, (e: EvtMouseMove) => {\n            if (this._dragging) {\n                const draggingEvent = new EvtDragging(e.x, e.y, e.button, e.shiftDown, e.altDown, e.ctrlDown, e.metaDown, this._draggingData);\n                this.object.triggerEx(draggingEvent);\n\n                const obj = this.object as SceneObject;\n                obj.view.updateHitObjects(e.x, e.y);\n                const dragOverEvent = new EvtDragOver(e.x, e.y, e.button, e.shiftDown, e.altDown, e.ctrlDown, e.metaDown, obj, this._draggingData);\n                for (let i = 0; i < obj.view.hitObjects.length; i++) {\n                    const hitObj = obj.view.hitObjects[i];\n                    if (hitObj !== obj && hitObj.z <= obj.z) {\n                        hitObj.triggerEx(dragOverEvent);\n                        if (!dragOverEvent.bubble) {\n                            break;\n                        }\n                    }\n                }\n                if (dragOverEvent.bubble) {\n                    obj.view.triggerEx(dragOverEvent);\n                }\n                e.cancelBubble();\n            }\n        });\n    }\n}\n\nexport class CoDroppable extends Component {\n    static readonly type = 'Droppable';\n    constructor() {\n        super(CoDroppable.type);\n    }\n}\n\nexport class CoImage extends Component {\n    static readonly type = 'Image';\n    private _image: HTMLImageElement;\n    private _width: number;\n    private _height: number;\n    private _loaded: boolean;\n    constructor(filename: string = null, width: number = 0, height: number = 0) {\n        super(CoImage.type);\n        this._image = new Image();\n        if (filename) {\n            this._image.src = filename;\n        }\n        if (width) {\n            this._image.width = width;\n            this._width = width;\n        } else {\n            this._width = this._image.complete ? this._image.width : 0;\n        }\n        if (height) {\n            this._image.height = height;\n            this._height = height;\n        } else {\n            this._height = this._image.complete ? this._image.height : 0;\n        }\n        if (!this._image.complete) {\n            this._loaded = false;\n            this._image.onload = () => {\n                if (this._width === 0) {\n                    this._width = this._image.width;\n                }\n                if (this._height === 0) {\n                    this._height = this._image.height;\n                }\n                this._loaded = true;\n            };\n        } else {\n            this._loaded = true;\n        }\n        this.on(EvtCull.type, (evt: EvtCull) => {\n            if (this._loaded) {\n                const node = this.object as SceneObject;\n                evt.addObject(this, node.z, node.worldTransform);\n            }\n        });\n        this.on(EvtGetBoundingShape.type, (evt: EvtGetBoundingShape) => {\n            if (this._loaded) {\n                evt.shape = new BoundingBox({ x: -this._width * this.object.anchorPoint.x, y: -this._height * this.object.anchorPoint.y, w: this._width, h: this._height });\n            }\n        });\n        this.on(EvtDraw.type, (evt: EvtDraw) => {\n            if (this._loaded) {\n                evt.canvas.context.drawImage(\n                    this._image,\n                    -Math.round(this._width * this.object.anchorPoint.x) - 0.5,\n                    -Math.round(this._height * this.object.anchorPoint.y) - 0.5,\n                    this._width,\n                    this._height\n                );\n            }\n        });\n        this.on(EvtGetProp.type, (ev: EvtGetProp) => {\n            switch (ev.propName) {\n                case 'width':\n                    ev.propValue = this._width;\n                    ev.eat();\n                    break;\n                case 'height':\n                    ev.propValue = this._height;\n                    ev.eat();\n                    break;\n                default:\n                    break;\n            }\n        });\n        this.on(EvtSetProp.type, (ev: EvtSetProp) => {\n            switch (ev.propName) {\n                case 'width':\n                    this._width = ev.propValue as number;\n                    this._image.width = this._width;\n                    ev.eat();\n                    break;\n                case 'height':\n                    this._height = ev.propValue as number;\n                    this._image.height = this._height;\n                    ev.eat();\n                    break;\n                default:\n                    break;\n            }\n        });\n    }\n}\n","function setPixel(imageData: Uint8ClampedArray, w: number, h: number, x: number, y: number, r: number, g: number, b: number) {\n    const i = (y * w + x) * 4;\n    imageData[i] = r;\n    imageData[i + 1] = g;\n    imageData[i + 2] = b;\n    imageData[i + 3] = 255;\n}\n\nfunction blendPixel(imageData: Uint8ClampedArray, w: number, h: number, x: number, y: number, r: number, g: number, b: number, a: number) {\n    const i = (y * w + x) * 4;\n    const ia = 1 - a;\n    imageData[i] = clamp(imageData[i] * ia + r * a, 0, 255);\n    imageData[i + 1] = clamp(imageData[i + 1] * ia + g * a, 0, 255);\n    imageData[i + 2] = clamp(imageData[i + 2] * ia + b * a, 0, 255);\n    imageData[i + 3] = Math.max(imageData[i + 3], a * 255);\n    /*\n    const c = a * 255;\n    imageData[i] = c;\n    imageData[i+1] = c;\n    imageData[i+2] = c;\n    imageData[i+3] = Math.max(imageData[i+3], c);\n    */\n}\nfunction clamp(value: number, minval: number, maxval: number) {\n    if (value < minval) {\n        value = minval;\n    }\n    if (value > maxval) {\n        value = maxval;\n    }\n    return value;\n}\nfunction blendImageData(imageData: Uint8ClampedArray, buffer: Uint8ClampedArray) {\n    for (let i = 0; i < imageData.length / 4; i++) {\n        const alpha = buffer[i * 4 + 3] / 255;\n        const invalpha = 1 - alpha;\n        imageData[i * 4] = imageData[i * 4] * invalpha + buffer[i * 4];\n        imageData[i * 4 + 1] = imageData[i * 4 + 1] * invalpha + buffer[i * 4 + 1];\n        imageData[i * 4 + 2] = imageData[i * 4 + 2] * invalpha + buffer[i * 4 + 2];\n        if (imageData[i * 4 + 3] < buffer[i * 4 + 3]) {\n            imageData[i * 4 + 3] = buffer[i * 4 + 3];\n        }\n    }\n}\nlet buffer: Uint8ClampedArray = null;\n\nfunction fillCircle(imageData: Uint8ClampedArray, w: number, h: number, x0: number, y0: number, radius: number, r: number, g: number, b: number) {\n    if (buffer === null || buffer.length < imageData.length) {\n        buffer = new Uint8ClampedArray(imageData.length);\n    }\n    function plot(x: number, y: number) {\n        // setPixel (imageData, w, h, x, y, r, g, b);\n        const dx = x - x0;\n        const dy = y - y0;\n        const f = 1 - Math.sqrt((dx * dx + dy * dy) / (radius * radius));\n        const i = (y * w + x) * 4;\n        buffer[i] = r * f;\n        buffer[i + 1] = g * f;\n        buffer[i + 2] = b * f;\n        buffer[i + 3] = f * 255;\n        // const f = 1.0 - Math.max(Math.min(1.0, (dx * dx + dy * dy) / (radius * radius)), 0.0);\n        // blendPixel (imageData, w, h, x, y, r, g, b, f/255)\n        // setPixel (imageData, w, h, x, y, f * 255, f * 255, f * 255);\n        // const r1 = Math.floor(255 * f);\n        // const g1 = Math.floor(255 * f);\n        // const b1 = Math.floor(255 * f);\n        // setPixel (imageData, w, h, x, y, r1, g1, b1);\n    }\n    let x = 0;\n    let y = radius;\n    let dx = 3;\n    let dy = 2 - radius - radius;\n    let d = 1 - radius;\n    let xi;\n    plot(x + x0, y + y0);\n    plot(x + x0, -y + y0);\n    for (xi = -radius + x0; xi <= radius + x0; xi++) {\n        plot(xi, y0);\n    }\n    while (x < y) {\n        if (d < 0) {\n            d += dx;\n            dx += 2;\n            x++;\n        } else {\n            d += dx + dy;\n            dx += 2;\n            dy += 2;\n            x++;\n            y--;\n        }\n        for (xi = -x + x0; xi <= x + x0; xi++) {\n            plot(xi, -y + y0);\n            plot(xi, y + y0);\n        }\n        for (xi = -y + x0; xi <= y + x0; xi++) {\n            plot(xi, -x + y0);\n            plot(xi, x + y0);\n        }\n    }\n    blendImageData(imageData, buffer);\n}\n\nfunction bresenhamDrawLine(imageData: Uint8ClampedArray, w: number, h: number, x1: number, y1: number, x2: number, y2: number, r: number, g: number, b: number) {\n    let dx = Math.abs(x2 - x1);\n    let dy = Math.abs(y2 - y1);\n    let yy = 0;\n    let t;\n    if (dx < dy) {\n        yy = 1;\n        t = x1;\n        x1 = y1;\n        y1 = t;\n        t = x2;\n        x2 = y2;\n        y2 = t;\n        t = dx;\n        dx = dy;\n        dy = t;\n    }\n    const ix = x2 > x1 ? 1 : -1;\n    const iy = y2 > y1 ? 1 : -1;\n    let cx = x1;\n    let cy = y1;\n    let n2dy = dy * 2;\n    let n2dydx = (dy - dx) * 2;\n    let d = dy * 2 - dx;\n    if (yy === 1) {\n        while (cx !== x2) {\n            if (d < 0) {\n                d += n2dy;\n            } else {\n                cy += iy;\n                d += n2dydx;\n            }\n            setPixel(imageData, w, h, cy, cx, r, g, b);\n            cx += ix;\n        }\n    } else {\n        while (cx !== x2) {\n            if (d < 0) {\n                d += n2dy;\n            } else {\n                cy += iy;\n                d += n2dydx;\n            }\n            setPixel(imageData, w, h, cx, cy, r, g, b);\n            cx += ix;\n        }\n    }\n}\n\ninterface IColorRGBA {\n    r: number;\n    g: number;\n    b: number;\n    a: number;\n}\n\nfunction parseColorRGBA(rgba: string): IColorRGBA {\n    let result: IColorRGBA = {\n        r: 255,\n        g: 255,\n        b: 255,\n        a: 255\n    };\n    let c: number[] = [];\n    let t = 0;\n    const s = rgba.toLowerCase();\n    const d1 = '0'.charCodeAt(0);\n    const d2 = '9'.charCodeAt(0);\n    const h1 = 'a'.charCodeAt(0);\n    const h2 = 'f'.charCodeAt(0);\n    for (let i = 1; i < rgba.length; i++) {\n        const ch = rgba.charCodeAt(i);\n        let val = 0;\n        if (ch >= d1 && ch <= d2) {\n            val = ch - d1;\n        } else if (ch >= h1 && ch <= h2) {\n            val = 10 + ch - h1;\n        }\n        if (i % 2 === 1) {\n            t = val;\n        } else {\n            c.push(t * 16 + val);\n        }\n    }\n    if (c.length > 0) {\n        result.r = c[0];\n    }\n    if (c.length > 1) {\n        result.g = c[1];\n    }\n    if (c.length > 2) {\n        result.b = c[2];\n    }\n    if (c.length > 3) {\n        result.a = c[3];\n    }\n    return result;\n}\n\nexport function DrawLine(context: CanvasRenderingContext2D, x1: number, y1: number, x2: number, y2: number, color: string) {\n    const rgba = parseColorRGBA(color);\n    const xmin = x1 > x2 ? x2 : x1;\n    const ymin = y1 > y2 ? y2 : y1;\n    const xmax = x1 > x2 ? x1 : x2;\n    const ymax = y1 > y2 ? y1 : y2;\n    const imageData = context.getImageData(xmin, ymin, xmax - xmin + 1, ymax - ymin + 1);\n    bresenhamDrawLine(imageData.data, imageData.width, imageData.height, x1 - xmin, y1 - ymin, x2 - xmin, y2 - ymin, rgba.r, rgba.g, rgba.b);\n    context.putImageData(imageData, xmin, ymin);\n}\n\nexport function FillCircle(context: CanvasRenderingContext2D, x0: number, y0: number, radius: number, color: string) {\n    const rgba = parseColorRGBA(color);\n    const imageData = context.getImageData(x0 - radius, y0 - radius, 2 * radius + 1, 2 * radius + 1);\n    fillCircle(imageData.data, imageData.width, imageData.height, radius, radius, radius, rgba.r, rgba.g, rgba.b);\n    context.putImageData(imageData, x0 - radius, y0 - radius);\n}\n","import { App } from './core';\r\n\r\nexport * from './all';\r\n\r\nconst readyFuncList: Array<() => void> = [];\r\nlet isReady = false;\r\n\r\nexport function ready(fn: () => void) {\r\n    if (fn) {\r\n        if (isReady) {\r\n            window.setTimeout(fn);\r\n        } else {\r\n            readyFuncList.push(fn);\r\n        }\r\n    }\r\n}\r\n\r\nfunction documentCompleted() {\r\n    return document.readyState === 'complete' || (document.readyState !== 'loading' && !(document.documentElement as any).doScroll);\r\n}\r\n\r\nfunction bootstrap() {\r\n    isReady = true;\r\n    document.removeEventListener('DOMContentLoaded', bootstrap);\r\n    window.removeEventListener('load', bootstrap);\r\n\r\n    App.run();\r\n    readyFuncList.forEach(fn => {\r\n        fn();\r\n    });\r\n    readyFuncList.length = 0;\r\n}\r\n\r\n(function() {\r\n    if (documentCompleted()) {\r\n        window.setTimeout(bootstrap);\r\n    } else {\r\n        document.addEventListener('DOMContentLoaded', bootstrap);\r\n        window.addEventListener('load', bootstrap);\r\n    }\r\n})();\r\n"],"names":["__extends","point.GetVector","point.CrossProduct","point.VectorLengthSq","shape.BoundingShape","boundinghull.BoundingHull","boundingbox.BoundingBox","boundingsegment.BoundingSegment","boundingsphere.BoundingSphere","point.GetTopLeft","point.GetBottomLeft","point.GetBottomRight","point.GetTopRight","point.ClampPoint","point.DotProduct","point.DistanceSq","EventListenerOrder","SplineType","KeyCode"],"mappings":"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"}